<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Design - Staff Engineer Prep</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="../index.html" class="logo">StaffEngPrep</a>
            <ul class="nav-links">
                <li><a href="../coding-rounds/index.html">Coding</a></li>
                <li><a href="index.html" style="color: var(--primary-color);">System Design</a></li>
                <li><a href="../company-specific/index.html">Companies</a></li>
                <li><a href="../behavioral/index.html">Behavioral</a></li>
            </ul>
        </div>
    </nav>

    <div class="layout-with-sidebar">
        <!-- Left Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <nav class="sidebar-nav">
                <div class="sidebar-section">
                    <div class="sidebar-section-title">Getting Started</div>
                    <a href="index.html" class="sidebar-link active">
                        Introduction
                    </a>
                </div>

                <div class="sidebar-section">
                    <div class="sidebar-section-title">Core Concepts</div>
                    <a href="module-01.html" class="sidebar-link" data-module="1">
                        <span class="sidebar-link-number">1</span>
                        Scalability Fundamentals
                    </a>
                    <a href="module-02.html" class="sidebar-link" data-module="2">
                        <span class="sidebar-link-number">2</span>
                        Database Systems
                    </a>
                    <a href="module-03.html" class="sidebar-link" data-module="3">
                        <span class="sidebar-link-number">3</span>
                        Distributed Systems
                    </a>
                    <a href="module-04.html" class="sidebar-link" data-module="4">
                        <span class="sidebar-link-number">4</span>
                        Storage & Data Processing
                    </a>
                    <a href="module-05.html" class="sidebar-link" data-module="5">
                        <span class="sidebar-link-number">5</span>
                        Seminal Papers
                    </a>
                    <a href="module-09.html" class="sidebar-link" data-module="9">
                        <span class="sidebar-link-number">6</span>
                        API Design
                    </a>
                    <a href="module-10.html" class="sidebar-link" data-module="10">
                        <span class="sidebar-link-number">7</span>
                        Numbers to Know
                    </a>
                </div>

                <div class="sidebar-section">
                    <div class="sidebar-section-title">Patterns</div>
                    <a href="module-11.html" class="sidebar-link" data-module="11">
                        <span class="sidebar-link-number">8</span>
                        Real-time Updates
                    </a>
                    <a href="module-12.html" class="sidebar-link" data-module="12">
                        <span class="sidebar-link-number">9</span>
                        Rate Limiting
                    </a>
                </div>

                <div class="sidebar-section">
                    <div class="sidebar-section-title">Problem Breakdowns</div>
                    <a href="module-06.html" class="sidebar-link" data-module="6">
                        <span class="sidebar-link-number">10</span>
                        Common Problems
                    </a>
                    <a href="problems/url-shortener.html" class="sidebar-link">
                        URL Shortener
                    </a>
                    <a href="problems/news-feed.html" class="sidebar-link">
                        News Feed
                    </a>
                    <a href="problems/chat-system.html" class="sidebar-link">
                        Chat System
                    </a>
                    <a href="problems/video-streaming.html" class="sidebar-link">
                        Video Streaming
                    </a>
                </div>

                <div class="sidebar-section">
                    <div class="sidebar-section-title">Interview Prep</div>
                    <a href="module-07.html" class="sidebar-link" data-module="7">
                        <span class="sidebar-link-number">11</span>
                        Framework Mastery
                    </a>
                    <a href="module-08.html" class="sidebar-link" data-module="8">
                        <span class="sidebar-link-number">12</span>
                        Mock Interviews
                    </a>
                </div>
            </nav>
        </aside>

        <!-- Mobile sidebar toggle -->
        <button class="sidebar-toggle" id="sidebarToggle">â˜°</button>
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <!-- Main Content -->
        <main class="main-content-wide">
            <h1>System Design</h1>
            <p class="text-muted mb-3">Learn to design scalable distributed systems and ace the system design interview.</p>

            <!-- Progress -->
            <div class="progress-container">
                <div class="progress-header">
                    <span><strong>Course Progress</strong></span>
                    <span class="progress-label" id="progress-label">0% Complete</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <!-- Four Phase Overview -->
            <h2 class="mt-4 mb-3">Four-Phase Approach</h2>

            <div class="diagram-container">
                <div class="mermaid">
flowchart LR
    subgraph "Phase 1 (2-3 months)"
        A[Foundation Building]
    end

    subgraph "Phase 2 (1-2 months)"
        B[Real-World Systems]
    end

    subgraph "Phase 3 (1 month)"
        C[Interview Prep]
    end

    subgraph "Phase 4 (1 month)"
        D[Mock Interviews]
    end

    A --> B --> C --> D
                </div>
            </div>

            <!-- RESHADE Framework -->
            <h2 class="mt-4 mb-3">Interview Framework: RESHADE</h2>

            <div class="card-grid">
                <div class="card">
                    <h3>R - Requirements</h3>
                    <p>Clarify functional & non-functional requirements (5-8 min)</p>
                </div>
                <div class="card">
                    <h3>E - Estimation</h3>
                    <p>Calculate scale, storage, bandwidth (3-5 min)</p>
                </div>
                <div class="card">
                    <h3>S - Storage Schema</h3>
                    <p>Design data model and database choices (3-5 min)</p>
                </div>
                <div class="card">
                    <h3>H - High-Level Design</h3>
                    <p>Draw component architecture (10-15 min)</p>
                </div>
                <div class="card">
                    <h3>A - API Design</h3>
                    <p>Define interface contracts (3-5 min)</p>
                </div>
                <div class="card">
                    <h3>D - Deep Dive</h3>
                    <p>Detail critical components (15-20 min)</p>
                </div>
            </div>

            <!-- Typical Web Architecture -->
            <h2 class="mt-4 mb-3">Typical Web Architecture</h2>

            <div class="diagram-container">
                <div class="mermaid">
flowchart TB
    subgraph "Client Layer"
        U[Users]
    end

    subgraph "Edge"
        CDN[CDN]
        LB[Load Balancer]
    end

    subgraph "Application"
        API1[API Server]
        API2[API Server]
    end

    subgraph "Caching"
        RC[Redis Cache]
    end

    subgraph "Data"
        DB[(Primary DB)]
        DBR[(Read Replica)]
    end

    subgraph "Async"
        MQ[Message Queue]
        W[Workers]
    end

    U --> CDN --> LB
    LB --> API1 & API2
    API1 & API2 --> RC
    API1 & API2 --> DB
    DB --> DBR
    API1 & API2 --> MQ --> W
                </div>
            </div>

            <!-- Quick Quiz -->
            <h2 class="mt-4 mb-3">Quick Assessment</h2>

            <div class="quiz-container" id="quick-quiz"></div>

            <!-- Key Concepts -->
            <h2 class="mt-4 mb-3">Key Concepts to Review</h2>

            <div class="review-schedule" id="design-review"></div>

            <!-- Resources -->
            <h2 class="mt-4 mb-3">Essential Resources</h2>

            <div class="card-grid">
                <div class="card">
                    <h3>DDIA Book</h3>
                    <p>Designing Data-Intensive Applications by Martin Kleppmann - The foundational book.</p>
                </div>
                <div class="card">
                    <h3>Seminal Papers</h3>
                    <p>Amazon Dynamo, Google GFS, Apache Kafka, Google Spanner</p>
                </div>
                <div class="card">
                    <h3>Tech Blogs</h3>
                    <p>Netflix, Uber, Meta, LinkedIn, Pinterest engineering blogs</p>
                </div>
                <div class="card">
                    <h3>Practice Platforms</h3>
                    <p>HelloInterview, Educative.io, Alex Xu books</p>
                </div>
            </div>

        </main>
    </div>

    <script src="../assets/js/app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Sidebar toggle for mobile
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebarToggle');
            const sidebarOverlay = document.getElementById('sidebarOverlay');

            sidebarToggle.addEventListener('click', function() {
                sidebar.classList.toggle('open');
                sidebarOverlay.classList.toggle('open');
            });

            sidebarOverlay.addEventListener('click', function() {
                sidebar.classList.remove('open');
                sidebarOverlay.classList.remove('open');
            });

            // Update sidebar links based on completion status
            document.querySelectorAll('.sidebar-link[data-module]').forEach(link => {
                const moduleNum = parseInt(link.dataset.module);
                if (StaffEngPrep.ProgressTracker.isModuleComplete('systemDesign', moduleNum)) {
                    link.classList.add('completed');
                }
            });

            // Update progress
            const progress = StaffEngPrep.ProgressTracker.getOverallProgress('systemDesign');
            document.getElementById('progress-fill').style.width = progress + '%';
            document.getElementById('progress-label').textContent = progress + '% Complete';

            // Initialize quiz
            const quizQuestions = [
                {
                    question: "What does CAP theorem state?",
                    options: [
                        "You can have all three: Consistency, Availability, Partition tolerance",
                        "You can only have two of: Consistency, Availability, Partition tolerance",
                        "Consistency always beats Availability",
                        "Partitions never happen in modern systems"
                    ],
                    correct: 1,
                    explanation: "CAP theorem states that in the presence of network partitions, you must choose between consistency and availability."
                },
                {
                    question: "When would you choose eventual consistency over strong consistency?",
                    options: [
                        "Financial transactions",
                        "User authentication",
                        "Social media feeds",
                        "Inventory management"
                    ],
                    correct: 2,
                    explanation: "Social media feeds can tolerate slightly stale data, making eventual consistency acceptable for better availability."
                },
                {
                    question: "What is the main advantage of horizontal scaling?",
                    options: [
                        "Simpler architecture",
                        "No distributed systems complexity",
                        "Theoretically unlimited scaling",
                        "Always cheaper"
                    ],
                    correct: 2,
                    explanation: "Horizontal scaling allows adding more machines, theoretically enabling unlimited growth."
                }
            ];

            const quiz = new StaffEngPrep.Quiz('quick-quiz', quizQuestions);
            quiz.render();

            // Review schedule
            const concepts = [
                { id: 'cap-theorem', name: 'CAP Theorem' },
                { id: 'consistent-hashing', name: 'Consistent Hashing' },
                { id: 'database-sharding', name: 'Database Sharding' },
                { id: 'caching-strategies', name: 'Caching Strategies' },
                { id: 'load-balancing', name: 'Load Balancing' },
                { id: 'message-queues', name: 'Message Queues' }
            ];
            StaffEngPrep.renderReviewSchedule('design-review', concepts);
        });
    </script>
</body>
</html>
