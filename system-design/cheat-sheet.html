<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Design Cheat Sheet - Staff Engineer Prep</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <style>
        .cheat-sheet-problem {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        .cheat-sheet-problem h3 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
            font-size: 1.4rem;
        }
        .cheat-sheet-problem h4 {
            color: var(--text-color);
            margin: 1rem 0 0.5rem 0;
            font-size: 1rem;
            font-weight: 600;
        }
        .cheat-sheet-problem h4::before {
            content: "‚ñ∏ ";
            color: var(--primary-color);
        }
        .cheat-sheet-problem ul {
            margin: 0;
            padding-left: 1.2rem;
        }
        .cheat-sheet-problem li {
            margin-bottom: 0.3rem;
            line-height: 1.5;
        }
        .cheat-sheet-problem strong {
            color: var(--primary-color);
        }
        .cheat-sheet-problem code {
            background: var(--code-bg, #1e1e1e);
            padding: 0.15rem 0.4rem;
            border-radius: 3px;
            font-size: 0.85rem;
        }
        .failure-story {
            background: rgba(255, 107, 107, 0.1);
            border-left: 3px solid #ff6b6b;
            padding: 0.75rem 1rem;
            margin-top: 0.5rem;
            border-radius: 0 4px 4px 0;
        }
        .toc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 0.5rem;
            margin-bottom: 2rem;
        }
        .toc-link {
            padding: 0.5rem 0.75rem;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            text-decoration: none;
            color: var(--text-color);
            font-size: 0.9rem;
            transition: all 0.2s;
        }
        .toc-link:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        .difficulty-tag {
            display: inline-block;
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 0.5rem;
            vertical-align: middle;
        }
        .difficulty-easy { background: #2ecc71; color: white; }
        .difficulty-medium { background: #f39c12; color: white; }
        .difficulty-hard { background: #e74c3c; color: white; }
        .print-btn {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            padding: 0.75rem 1.5rem;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            z-index: 100;
        }
        .print-btn:hover {
            background: var(--primary-hover);
        }
        @media print {
            .sidebar, .navbar, .sidebar-toggle, .print-btn { display: none !important; }
            .main-content { margin: 0 !important; max-width: 100% !important; }
            .cheat-sheet-problem { break-inside: avoid; page-break-inside: avoid; }
        }
        /* Two-column layout for problem cards */
        .problem-layout {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 1.5rem;
        }
        .problem-content {
            min-width: 0;
        }
        .practice-sidebar {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.05), rgba(139, 92, 246, 0.05));
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            height: fit-content;
            position: sticky;
            top: 1rem;
        }
        .practice-sidebar h4 {
            margin: 0 0 0.75rem 0 !important;
            font-size: 0.95rem !important;
            color: var(--primary-color) !important;
        }
        .practice-sidebar h4::before {
            content: "üéØ " !important;
        }
        .practice-section {
            margin-bottom: 1rem;
        }
        .practice-section:last-child {
            margin-bottom: 0;
        }
        .practice-section h5 {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin: 0 0 0.5rem 0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .practice-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            margin-bottom: 0.5rem;
            text-decoration: none;
            color: var(--text-color);
            font-size: 0.85rem;
            transition: all 0.2s;
        }
        .practice-link:hover {
            border-color: var(--primary-color);
            background: rgba(99, 102, 241, 0.1);
        }
        .practice-link .difficulty {
            font-size: 0.7rem;
            padding: 0.15rem 0.4rem;
            border-radius: 3px;
            font-weight: 600;
        }
        .practice-link .difficulty.easy { background: #2ecc71; color: white; }
        .practice-link .difficulty.medium { background: #f39c12; color: white; }
        .practice-link .difficulty.hard { background: #e74c3c; color: white; }
        .practice-link .source {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-left: auto;
        }
        @media (max-width: 900px) {
            .problem-layout {
                grid-template-columns: 1fr;
            }
            .practice-sidebar {
                position: static;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="../index.html" class="logo">StaffEngPrep</a>
            <ul class="nav-links">
                <li><a href="../coding-rounds/index.html">Coding</a></li>
                <li><a href="index.html" style="color: var(--primary-color);">System Design</a></li>
                <li><a href="../company-specific/index.html">Companies</a></li>
                <li><a href="../behavioral/index.html">Behavioral</a></li>
                <li><a href="../generative-ai/index.html">Gen AI</a></li>
            </ul>
        </div>
    </nav>

    <div class="layout-with-sidebar">
        <!-- Left Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <nav class="sidebar-nav">
                <div class="sidebar-section">
                    <div class="sidebar-section-title">Getting Started</div>
                    <a href="index.html" class="sidebar-link">Introduction</a>
                    <a href="cheat-sheet.html" class="sidebar-link active">üìã Cheat Sheet</a>
                </div>

                <div class="sidebar-section">
                    <div class="sidebar-section-title">Core Concepts</div>
                    <a href="module-01.html" class="sidebar-link">
                        <span class="sidebar-link-number">1</span>Scalability Fundamentals
                    </a>
                    <a href="module-02.html" class="sidebar-link">
                        <span class="sidebar-link-number">2</span>Database Systems
                    </a>
                    <a href="module-03.html" class="sidebar-link">
                        <span class="sidebar-link-number">3</span>Distributed Systems
                    </a>
                    <a href="module-04.html" class="sidebar-link">
                        <span class="sidebar-link-number">4</span>Storage & Data Processing
                    </a>
                    <a href="module-05.html" class="sidebar-link">
                        <span class="sidebar-link-number">5</span>Seminal Papers
                    </a>
                    <a href="module-09.html" class="sidebar-link">
                        <span class="sidebar-link-number">6</span>API Design
                    </a>
                    <a href="module-10.html" class="sidebar-link">
                        <span class="sidebar-link-number">7</span>Numbers to Know
                    </a>
                </div>

                <div class="sidebar-section">
                    <div class="sidebar-section-title">Patterns</div>
                    <a href="module-11.html" class="sidebar-link">
                        <span class="sidebar-link-number">8</span>Real-time Updates
                    </a>
                    <a href="module-12.html" class="sidebar-link">
                        <span class="sidebar-link-number">9</span>Rate Limiting
                    </a>
                </div>

                <div class="sidebar-section">
                    <div class="sidebar-section-title">Problem Breakdowns</div>
                    <a href="module-06.html" class="sidebar-link">
                        <span class="sidebar-link-number">10</span>Common Problems
                    </a>
                    <a href="problems/url-shortener.html" class="sidebar-link">URL Shortener</a>
                    <a href="problems/news-feed.html" class="sidebar-link">News Feed</a>
                    <a href="problems/chat-system.html" class="sidebar-link">Chat System</a>
                    <a href="problems/video-streaming.html" class="sidebar-link">Video Streaming</a>
                </div>

                <div class="sidebar-section">
                    <div class="sidebar-section-title">Deep Dive Papers</div>
                    <a href="papers/dynamo.html" class="sidebar-link">Amazon Dynamo</a>
                    <a href="papers/gfs.html" class="sidebar-link">Google GFS</a>
                    <a href="papers/kafka.html" class="sidebar-link">Apache Kafka</a>
                    <a href="papers/spanner.html" class="sidebar-link">Google Spanner</a>
                    <a href="papers/memcache.html" class="sidebar-link">Facebook Memcache</a>
                </div>

                <div class="sidebar-section">
                    <div class="sidebar-section-title">Interview Prep</div>
                    <a href="module-07.html" class="sidebar-link">
                        <span class="sidebar-link-number">11</span>Framework Mastery
                    </a>
                    <a href="module-08.html" class="sidebar-link">
                        <span class="sidebar-link-number">12</span>Mock Interviews
                    </a>
                </div>
            </nav>
        </aside>

        <!-- Mobile sidebar toggle -->
        <button class="sidebar-toggle" id="sidebarToggle">‚ò∞</button>
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <!-- Main Content -->
        <main class="main-content">
            <h1>System Design Cheat Sheet</h1>
            <p class="text-muted mb-3">High-signal, opinionated summaries for 20 staff-level system design problems. Perfect for last-minute review.</p>

            <button class="print-btn" onclick="window.print()">üñ®Ô∏è Print / Save PDF</button>

            <!-- Table of Contents -->
            <h2 class="mt-4 mb-3">Quick Navigation</h2>
            <div class="toc-grid">
                <a href="#url-shortener" class="toc-link">URL Shortener</a>
                <a href="#news-feed" class="toc-link">News Feed</a>
                <a href="#chat-system" class="toc-link">Chat System</a>
                <a href="#video-streaming" class="toc-link">Video Streaming</a>
                <a href="#distributed-cache" class="toc-link">Distributed Cache</a>
                <a href="#rate-limiter" class="toc-link">Rate Limiter</a>
                <a href="#notification-system" class="toc-link">Notification System</a>
                <a href="#search-autocomplete" class="toc-link">Search Autocomplete</a>
                <a href="#web-crawler" class="toc-link">Web Crawler</a>
                <a href="#cloud-storage" class="toc-link">Cloud Storage</a>
                <a href="#ride-sharing" class="toc-link">Ride Sharing</a>
                <a href="#e-commerce" class="toc-link">E-Commerce</a>
                <a href="#payment-system" class="toc-link">Payment System</a>
                <a href="#message-queue" class="toc-link">Message Queue</a>
                <a href="#search-engine" class="toc-link">Search Engine</a>
                <a href="#ad-click-aggregator" class="toc-link">Ad Click Aggregator</a>
                <a href="#proximity-service" class="toc-link">Proximity Service</a>
                <a href="#collaborative-editing" class="toc-link">Collaborative Editing</a>
                <a href="#stock-exchange" class="toc-link">Stock Exchange</a>
                <a href="#booking-system" class="toc-link">Booking System</a>
            </div>

            <!-- ==================== URL SHORTENER ==================== -->
            <div class="cheat-sheet-problem" id="url-shortener">
                <h3>URL Shortener (TinyURL/Bitly) <span class="difficulty-tag difficulty-easy">Easy</span></h3>
                <div class="problem-layout">
                    <div class="problem-content">
                        <h4>1) Key Algorithms & Core Tradeoffs</h4>
                        <ul>
                            <li><strong>Base62 encoding</strong> of auto-increment ID or random hash ‚Äî simple, collision-free</li>
                            <li><strong>MD5/SHA256 hash + truncation</strong> ‚Äî collision risk requires DB check</li>
                            <li><strong>Tradeoff:</strong> Sequential IDs are predictable but fast; random hashes hide info but need collision handling</li>
                            <li><strong>Key insight:</strong> 7 chars of Base62 = 62^7 = 3.5 trillion URLs ‚Äî more than enough</li>
                        </ul>

                        <h4>2) Read vs Write Pattern & Latency</h4>
                        <ul>
                            <li><strong>Read:Write ratio:</strong> 100:1 ‚Äî heavily read-optimized</li>
                            <li><strong>P50/P99 latency:</strong> Reads 5ms/50ms (cache hit), Writes 20ms/100ms</li>
                            <li><strong>Optimization:</strong> Read path via cache; write path can be async</li>
                        </ul>

                        <h4>3) Core Data Stores</h4>
                        <ul>
                            <li><strong>Redis/Memcached:</strong> Hot URL cache ‚Äî 90%+ hit rate for popular links</li>
                            <li><strong>NoSQL (DynamoDB/Cassandra):</strong> URL mappings ‚Äî high write throughput, key-value access pattern</li>
                            <li><strong>Distributed ID Generator (Snowflake):</strong> Unique IDs without coordination overhead</li>
                        </ul>

                        <h4>4) One Failure Story</h4>
                        <div class="failure-story">
                            <strong>What breaks:</strong> Cache cluster fails during traffic spike<br>
                            <strong>Who feels pain:</strong> All users ‚Äî redirects slow to 200ms+, DB gets hammered<br>
                            <strong>Mitigation:</strong> Cache-aside pattern with TTL; circuit breaker to DB; pre-warm cache from DB on recovery
                        </div>

                        <h4>5) Best Reference</h4>
                        <ul>
                            <li><a href="https://github.com/donnemartin/system-design-primer#design-pastebin" target="_blank">System Design Primer: URL Shortener</a> ‚Äî Classic reference with Base62, hashing tradeoffs</li>
                            <li><a href="https://instagram-engineering.com/sharding-ids-at-instagram-1cf5a71e5a5c" target="_blank">Instagram Engineering: Sharding & IDs</a> ‚Äî How Instagram generates unique IDs at scale</li>
                        </ul>
                    </div>
                    <div class="practice-sidebar">
                        <h4>Practice Problems</h4>
                        <div class="practice-section">
                            <h5>Algorithm Practice</h5>
                            <a href="https://leetcode.com/problems/encode-and-decode-tinyurl/" target="_blank" class="practice-link">
                                <span>535. Encode/Decode TinyURL</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                            <a href="https://leetcode.com/problems/design-hashmap/" target="_blank" class="practice-link">
                                <span>706. Design HashMap</span>
                                <span class="difficulty easy">Easy</span>
                                <span class="source">LC</span>
                            </a>
                        </div>
                        <div class="practice-section">
                            <h5>LLD / OOD Practice</h5>
                            <a href="https://github.com/donnemartin/system-design-primer/blob/master/solutions/object_oriented_design/url_shortener" target="_blank" class="practice-link">
                                <span>URL Shortener OOD</span>
                                <span class="source">GitHub</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== NEWS FEED ==================== -->
            <div class="cheat-sheet-problem" id="news-feed">
                <h3>News Feed / Timeline (Facebook/Twitter) <span class="difficulty-tag difficulty-medium">Medium</span></h3>
                <div class="problem-layout">
                    <div class="problem-content">
                        <h4>1) Key Algorithms & Core Tradeoffs</h4>
                        <ul>
                            <li><strong>Fan-out on write:</strong> Push posts to follower feeds at write time ‚Äî fast reads, expensive writes</li>
                            <li><strong>Fan-out on read:</strong> Pull from followees at read time ‚Äî cheap writes, slow reads</li>
                            <li><strong>Hybrid approach:</strong> Fan-out on write for normal users; fan-out on read for celebrities (>1M followers)</li>
                            <li><strong>Ranking:</strong> ML model scores posts (engagement, recency, affinity) ‚Äî adds 20-50ms latency</li>
                        </ul>

                        <h4>2) Read vs Write Pattern & Latency</h4>
                        <ul>
                            <li><strong>Read:Write ratio:</strong> 1000:1 ‚Äî users scroll much more than post</li>
                            <li><strong>P50/P99 latency:</strong> Feed fetch 100ms/500ms; Post creation 50ms/200ms (async fan-out)</li>
                            <li><strong>Optimization:</strong> Pre-computed feeds in cache; ranking can be batched</li>
                        </ul>

                        <h4>3) Core Data Stores</h4>
                        <ul>
                            <li><strong>Redis Sorted Sets:</strong> User timelines ‚Äî O(1) prepend, O(log N) range queries by score</li>
                            <li><strong>Graph DB / Social Graph Service:</strong> Follower relationships ‚Äî who follows whom</li>
                            <li><strong>Blob Storage + CDN:</strong> Media (images, videos) ‚Äî posts reference media IDs</li>
                        </ul>

                        <h4>4) One Failure Story</h4>
                        <div class="failure-story">
                            <strong>What breaks:</strong> Celebrity posts to 50M followers ‚Äî write amplification explodes<br>
                            <strong>Who feels pain:</strong> System ‚Äî queue backlog grows, feed freshness degrades for everyone<br>
                            <strong>Mitigation:</strong> Detect high-follower accounts; switch to pull model; rate limit fan-out workers
                        </div>

                        <h4>5) Best Reference</h4>
                        <ul>
                            <li><a href="https://engineering.fb.com/2021/01/26/ml-applications/news-feed-ranking/" target="_blank">Meta Engineering: News Feed Ranking</a> ‚Äî ML-powered ranking at 2B+ users scale</li>
                            <li><a href="https://engineering.fb.com/2016/10/20/networking-traffic/client-side-ranking-to-more-efficiently-show-people-stories-in-feed/" target="_blank">Meta Engineering: Client-Side Ranking</a> ‚Äî Hybrid ranking architecture</li>
                        </ul>
                    </div>
                    <div class="practice-sidebar">
                        <h4>Practice Problems</h4>
                        <div class="practice-section">
                            <h5>Algorithm Practice</h5>
                            <a href="https://leetcode.com/problems/design-twitter/" target="_blank" class="practice-link">
                                <span>355. Design Twitter</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                            <a href="https://leetcode.com/problems/merge-k-sorted-lists/" target="_blank" class="practice-link">
                                <span>23. Merge K Sorted Lists</span>
                                <span class="difficulty hard">Hard</span>
                                <span class="source">LC</span>
                            </a>
                        </div>
                        <div class="practice-section">
                            <h5>LLD / OOD Practice</h5>
                            <a href="https://github.com/donnemartin/system-design-primer/blob/master/solutions/object_oriented_design/social_network" target="_blank" class="practice-link">
                                <span>Social Network OOD</span>
                                <span class="source">GitHub</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== CHAT SYSTEM ==================== -->
            <div class="cheat-sheet-problem" id="chat-system">
                <h3>Chat System (WhatsApp/Messenger) <span class="difficulty-tag difficulty-medium">Medium</span></h3>
                <div class="problem-layout">
                    <div class="problem-content">
                        <h4>1) Key Algorithms & Core Tradeoffs</h4>
                        <ul>
                            <li><strong>WebSocket connections:</strong> Persistent bi-directional ‚Äî low latency, high server memory</li>
                            <li><strong>Message ordering:</strong> Lamport timestamps or vector clocks ‚Äî eventual consistency vs strict ordering</li>
                            <li><strong>End-to-end encryption:</strong> Signal protocol ‚Äî security vs features (search, server-side backup)</li>
                            <li><strong>Group chat:</strong> Fan-out to members ‚Äî complexity scales with group size</li>
                        </ul>

                        <h4>2) Read vs Write Pattern & Latency</h4>
                        <ul>
                            <li><strong>Read:Write ratio:</strong> 1:1 ‚Äî balanced, real-time bidirectional</li>
                            <li><strong>P50/P99 latency:</strong> Message delivery 50ms/200ms (same region); 150ms/500ms (cross-region)</li>
                            <li><strong>Optimization:</strong> WebSocket keeps connection warm; messages queued for offline users</li>
                        </ul>

                        <h4>3) Core Data Stores</h4>
                        <ul>
                            <li><strong>Cassandra/ScyllaDB:</strong> Message history ‚Äî time-series data, partition by (chat_id, time_bucket)</li>
                            <li><strong>Redis:</strong> Online presence + connection mapping ‚Äî which server holds user's WebSocket</li>
                            <li><strong>Message Queue (Kafka):</strong> Async delivery to offline users ‚Äî durability guarantee</li>
                        </ul>

                        <h4>4) One Failure Story</h4>
                        <div class="failure-story">
                            <strong>What breaks:</strong> Chat server crashes ‚Äî 100K WebSocket connections drop<br>
                            <strong>Who feels pain:</strong> Users ‚Äî messages appear undelivered, reconnection storm<br>
                            <strong>Mitigation:</strong> Sticky sessions with failover; exponential backoff on reconnect; message queue buffers during outage
                        </div>

                        <h4>5) Best Reference</h4>
                        <ul>
                            <li><a href="https://www.erlang-solutions.com/blog/20-years-of-open-source-erlang-openerlang-interview-with-anton-lavrik-from-whatsapp/" target="_blank">Erlang Solutions: WhatsApp Interview</a> ‚Äî Why Erlang powers 40B messages/day</li>
                            <li><a href="https://discord.com/blog/how-discord-scaled-elixir-to-5-000-000-concurrent-users" target="_blank">Discord Engineering: Scaling Elixir</a> ‚Äî 5M concurrent users, WebSocket architecture</li>
                        </ul>
                    </div>
                    <div class="practice-sidebar">
                        <h4>Practice Problems</h4>
                        <div class="practice-section">
                            <h5>Algorithm Practice</h5>
                            <a href="https://leetcode.com/problems/design-bounded-blocking-queue/" target="_blank" class="practice-link">
                                <span>1188. Bounded Blocking Queue</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                            <a href="https://leetcode.com/problems/time-based-key-value-store/" target="_blank" class="practice-link">
                                <span>981. Time Based Key-Value</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                        </div>
                        <div class="practice-section">
                            <h5>LLD / OOD Practice</h5>
                            <a href="https://github.com/tssovi/grokking-the-object-oriented-design-interview/blob/master/object-oriented-design-case-studies/design-facebook-messenger.md" target="_blank" class="practice-link">
                                <span>Messenger OOD</span>
                                <span class="source">GitHub</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== VIDEO STREAMING ==================== -->
            <div class="cheat-sheet-problem" id="video-streaming">
                <h3>Video Streaming (YouTube/Netflix) <span class="difficulty-tag difficulty-hard">Hard</span></h3>
                <div class="problem-layout">
                    <div class="problem-content">
                        <h4>1) Key Algorithms & Core Tradeoffs</h4>
                        <ul>
                            <li><strong>Adaptive Bitrate (HLS/DASH):</strong> Client switches quality based on bandwidth ‚Äî smooth playback vs quality</li>
                            <li><strong>Transcoding pipeline:</strong> Convert to multiple resolutions/codecs ‚Äî CPU cost vs storage cost</li>
                            <li><strong>CDN edge caching:</strong> Popular content at edge ‚Äî latency vs cache cost vs origin load</li>
                            <li><strong>Recommendation ML:</strong> Personalized content ‚Äî engagement vs diversity vs filter bubbles</li>
                        </ul>

                        <h4>2) Read vs Write Pattern & Latency</h4>
                        <ul>
                            <li><strong>Read:Write ratio:</strong> 10000:1 ‚Äî video uploads rare, views constant</li>
                            <li><strong>P50/P99 latency:</strong> Video start 500ms/2s; Chunk fetch 50ms/200ms from CDN</li>
                            <li><strong>Optimization:</strong> Pre-buffer next chunks; CDN handles 95%+ of traffic</li>
                        </ul>

                        <h4>3) Core Data Stores</h4>
                        <ul>
                            <li><strong>Object Storage (S3):</strong> Video files ‚Äî petabytes of content, lifecycle policies for cold storage</li>
                            <li><strong>CDN (CloudFront/Akamai):</strong> Edge delivery ‚Äî reduce origin bandwidth by 95%</li>
                            <li><strong>Metadata DB (MySQL + Redis):</strong> Video info, user data ‚Äî relational for complex queries</li>
                        </ul>

                        <h4>4) One Failure Story</h4>
                        <div class="failure-story">
                            <strong>What breaks:</strong> Origin storage region goes down ‚Äî CDN cache expires<br>
                            <strong>Who feels pain:</strong> Users globally ‚Äî buffering, failed playback for cache-missed content<br>
                            <strong>Mitigation:</strong> Multi-region origin replication; extend CDN TTLs during incidents; serve stale content
                        </div>

                        <h4>5) Best Reference</h4>
                        <ul>
                            <li><a href="https://netflixtechblog.com/behind-the-streams-live-at-netflix-part-1-d23f917c2f40" target="_blank">Netflix Tech Blog: Behind the Streams</a> ‚Äî Live streaming architecture and transcoding</li>
                            <li><a href="https://openconnect.netflix.com/en/" target="_blank">Netflix Open Connect</a> ‚Äî How Netflix's CDN delivers 98% of traffic from edge</li>
                        </ul>
                    </div>
                    <div class="practice-sidebar">
                        <h4>Practice Problems</h4>
                        <div class="practice-section">
                            <h5>Algorithm Practice</h5>
                            <a href="https://leetcode.com/problems/design-video-sharing-platform/" target="_blank" class="practice-link">
                                <span>2254. Video Sharing Platform</span>
                                <span class="difficulty hard">Hard</span>
                                <span class="source">LC</span>
                            </a>
                            <a href="https://leetcode.com/problems/min-stack/" target="_blank" class="practice-link">
                                <span>155. Min Stack</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                        </div>
                        <div class="practice-section">
                            <h5>LLD / OOD Practice</h5>
                            <a href="https://github.com/tssovi/grokking-the-object-oriented-design-interview/blob/master/object-oriented-design-case-studies/design-youtube.md" target="_blank" class="practice-link">
                                <span>YouTube OOD</span>
                                <span class="source">GitHub</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== DISTRIBUTED CACHE ==================== -->
            <div class="cheat-sheet-problem" id="distributed-cache">
                <h3>Distributed Cache (Redis/Memcached) <span class="difficulty-tag difficulty-medium">Medium</span></h3>
                <div class="problem-layout">
                    <div class="problem-content">
                        <h4>1) Key Algorithms & Core Tradeoffs</h4>
                        <ul>
                            <li><strong>Consistent hashing:</strong> Minimize rebalancing on node add/remove ‚Äî complexity vs even distribution</li>
                            <li><strong>LRU eviction:</strong> Remove least recently used ‚Äî memory efficiency vs hit rate</li>
                            <li><strong>Cache-aside vs write-through:</strong> Consistency vs latency vs complexity</li>
                            <li><strong>Replication:</strong> Async replicas for reads ‚Äî availability vs consistency</li>
                        </ul>

                        <h4>2) Read vs Write Pattern & Latency</h4>
                        <ul>
                            <li><strong>Read:Write ratio:</strong> 100:1 ‚Äî caches are read-optimized by design</li>
                            <li><strong>P50/P99 latency:</strong> Reads 0.5ms/2ms; Writes 1ms/5ms</li>
                            <li><strong>Optimization:</strong> Local L1 cache ‚Üí distributed L2 cache ‚Üí database fallback</li>
                        </ul>

                        <h4>3) Core Data Stores</h4>
                        <ul>
                            <li><strong>Redis Cluster:</strong> Primary cache ‚Äî hash slots for sharding, pub/sub for invalidation</li>
                            <li><strong>Local in-process cache (Caffeine):</strong> Hot keys ‚Äî avoid network round-trip</li>
                            <li><strong>ZooKeeper/etcd:</strong> Cluster membership ‚Äî track which nodes are alive</li>
                        </ul>

                        <h4>4) One Failure Story</h4>
                        <div class="failure-story">
                            <strong>What breaks:</strong> Hot key (viral post) ‚Äî single shard overwhelmed<br>
                            <strong>Who feels pain:</strong> All users accessing that key ‚Äî timeouts, cascade to DB<br>
                            <strong>Mitigation:</strong> Key replication across shards; local caching; request coalescing for same key
                        </div>

                        <h4>5) Best Reference</h4>
                        <ul>
                            <li><a href="https://engineering.fb.com/2013/06/25/core-infra/scaling-memcache-at-facebook/" target="_blank">Meta Engineering: Scaling Memcache</a> ‚Äî Caching at Facebook's scale with consistency</li>
                            <li><a href="https://redis.io/docs/latest/operate/oss_and_stack/management/scaling/" target="_blank">Redis Official: Scaling Guide</a> ‚Äî Consistent hashing, replication, cluster mode</li>
                        </ul>
                    </div>
                    <div class="practice-sidebar">
                        <h4>Practice Problems</h4>
                        <div class="practice-section">
                            <h5>Algorithm Practice</h5>
                            <a href="https://leetcode.com/problems/lru-cache/" target="_blank" class="practice-link">
                                <span>146. LRU Cache</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                            <a href="https://leetcode.com/problems/lfu-cache/" target="_blank" class="practice-link">
                                <span>460. LFU Cache</span>
                                <span class="difficulty hard">Hard</span>
                                <span class="source">LC</span>
                            </a>
                        </div>
                        <div class="practice-section">
                            <h5>LLD / OOD Practice</h5>
                            <a href="https://www.educative.io/courses/grokking-modern-system-design/design-distributed-cache" target="_blank" class="practice-link">
                                <span>Distributed Cache OOD</span>
                                <span class="source">Educative</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== RATE LIMITER ==================== -->
            <div class="cheat-sheet-problem" id="rate-limiter">
                <h3>Rate Limiter <span class="difficulty-tag difficulty-easy">Easy</span></h3>
                <div class="problem-layout">
                    <div class="problem-content">
                        <h4>1) Key Algorithms & Core Tradeoffs</h4>
                        <ul>
                            <li><strong>Token bucket:</strong> Smooth rate + burst allowance ‚Äî flexible but memory per user</li>
                            <li><strong>Sliding window log:</strong> Exact counting ‚Äî accurate but high memory</li>
                            <li><strong>Sliding window counter:</strong> Weighted average of windows ‚Äî memory-efficient approximation</li>
                            <li><strong>Fixed window:</strong> Simple counters ‚Äî edge case: 2x burst at window boundary</li>
                        </ul>

                        <h4>2) Read vs Write Pattern & Latency</h4>
                        <ul>
                            <li><strong>Read:Write ratio:</strong> N/A ‚Äî every request is both a read and increment</li>
                            <li><strong>P50/P99 latency:</strong> 0.1ms/1ms ‚Äî must be negligible overhead</li>
                            <li><strong>Optimization:</strong> In-memory with async persistence; fail open vs fail closed tradeoff</li>
                        </ul>

                        <h4>3) Core Data Stores</h4>
                        <ul>
                            <li><strong>Redis:</strong> Counters with TTL ‚Äî <code>INCR</code> + <code>EXPIRE</code> atomic ops</li>
                            <li><strong>Local memory:</strong> Per-instance rate limiting ‚Äî no network latency</li>
                            <li><strong>Config store (etcd):</strong> Rate limit rules ‚Äî which endpoints, what limits</li>
                        </ul>

                        <h4>4) One Failure Story</h4>
                        <div class="failure-story">
                            <strong>What breaks:</strong> Redis cluster fails ‚Äî rate limiter loses state<br>
                            <strong>Who feels pain:</strong> Ops ‚Äî either over-limit legit users (fail closed) or let attacks through (fail open)<br>
                            <strong>Mitigation:</strong> Local fallback with conservative limits; distributed rate limiting with sync intervals
                        </div>

                        <h4>5) Best Reference</h4>
                        <ul>
                            <li><a href="https://blog.cloudflare.com/counting-things-a-lot-of-different-things/" target="_blank">Cloudflare: Rate Limiting at Scale</a> ‚Äî Sliding window algorithm for millions of domains</li>
                            <li><a href="https://stripe.com/blog/rate-limiters" target="_blank">Stripe Engineering: Rate Limiters</a> ‚Äî Token bucket implementation for API protection</li>
                        </ul>
                    </div>
                    <div class="practice-sidebar">
                        <h4>Practice Problems</h4>
                        <div class="practice-section">
                            <h5>Algorithm Practice</h5>
                            <a href="https://leetcode.com/problems/logger-rate-limiter/" target="_blank" class="practice-link">
                                <span>359. Logger Rate Limiter</span>
                                <span class="difficulty easy">Easy</span>
                                <span class="source">LC</span>
                            </a>
                            <a href="https://leetcode.com/problems/design-hit-counter/" target="_blank" class="practice-link">
                                <span>362. Design Hit Counter</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                        </div>
                        <div class="practice-section">
                            <h5>LLD / OOD Practice</h5>
                            <a href="https://github.com/donnemartin/system-design-primer#rate-limiter" target="_blank" class="practice-link">
                                <span>Rate Limiter OOD</span>
                                <span class="source">GitHub</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== NOTIFICATION SYSTEM ==================== -->
            <div class="cheat-sheet-problem" id="notification-system">
                <h3>Notification System (Push/Email/SMS) <span class="difficulty-tag difficulty-medium">Medium</span></h3>
                <div class="problem-layout">
                    <div class="problem-content">
                        <h4>1) Key Algorithms & Core Tradeoffs</h4>
                        <ul>
                            <li><strong>Priority queues:</strong> Urgent vs batch notifications ‚Äî latency vs throughput</li>
                            <li><strong>Deduplication:</strong> Idempotency keys prevent double-sends ‚Äî complexity vs user trust</li>
                            <li><strong>Rate limiting per user:</strong> Prevent notification spam ‚Äî engagement vs annoyance</li>
                            <li><strong>Template rendering:</strong> Pre-compiled vs dynamic ‚Äî flexibility vs performance</li>
                        </ul>

                        <h4>2) Read vs Write Pattern & Latency</h4>
                        <ul>
                            <li><strong>Read:Write ratio:</strong> N/A ‚Äî write-only from system perspective</li>
                            <li><strong>P50/P99 latency:</strong> Push 100ms/500ms; Email/SMS 1s/10s (third-party dependent)</li>
                            <li><strong>Optimization:</strong> Batch non-urgent; priority lane for transactional (2FA, receipts)</li>
                        </ul>

                        <h4>3) Core Data Stores</h4>
                        <ul>
                            <li><strong>Kafka:</strong> Event ingestion ‚Äî handles burst of notification triggers</li>
                            <li><strong>Redis:</strong> User preferences + device tokens ‚Äî fast lookup per notification</li>
                            <li><strong>PostgreSQL:</strong> Notification history + analytics ‚Äî queryable delivery status</li>
                        </ul>

                        <h4>4) One Failure Story</h4>
                        <div class="failure-story">
                            <strong>What breaks:</strong> APNs/FCM rate limit hit ‚Äî push notifications queue up<br>
                            <strong>Who feels pain:</strong> Users ‚Äî delayed or missing notifications for time-sensitive events<br>
                            <strong>Mitigation:</strong> Exponential backoff; fallback to email/SMS; surface delivery failures in app
                        </div>

                        <h4>5) Best Reference</h4>
                        <ul>
                            <li><a href="https://engineering.fb.com/2018/09/11/mobile/mobile-push-notifications/" target="_blank">Meta Engineering: Push Notifications</a> ‚Äî Scaling push to billions of devices</li>
                            <li><a href="https://firebase.google.com/docs/cloud-messaging/concept-options" target="_blank">Firebase Cloud Messaging Docs</a> ‚Äî FCM architecture and delivery options</li>
                        </ul>
                    </div>
                    <div class="practice-sidebar">
                        <h4>Practice Problems</h4>
                        <div class="practice-section">
                            <h5>Algorithm Practice</h5>
                            <a href="https://leetcode.com/problems/design-bounded-blocking-queue/" target="_blank" class="practice-link">
                                <span>1188. Bounded Blocking Queue</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                            <a href="https://leetcode.com/problems/task-scheduler/" target="_blank" class="practice-link">
                                <span>621. Task Scheduler</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                        </div>
                        <div class="practice-section">
                            <h5>LLD / OOD Practice</h5>
                            <a href="https://github.com/ashishps1/awesome-low-level-design/blob/main/problems/notification-service.md" target="_blank" class="practice-link">
                                <span>Notification Service OOD</span>
                                <span class="source">GitHub</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== SEARCH AUTOCOMPLETE ==================== -->
            <div class="cheat-sheet-problem" id="search-autocomplete">
                <h3>Search Autocomplete (Typeahead) <span class="difficulty-tag difficulty-medium">Medium</span></h3>
                <div class="problem-layout">
                    <div class="problem-content">
                        <h4>1) Key Algorithms & Core Tradeoffs</h4>
                        <ul>
                            <li><strong>Trie:</strong> Prefix tree for suggestions ‚Äî fast lookup, high memory</li>
                            <li><strong>Inverted index:</strong> Prefix ‚Üí documents ‚Äî good for phrase completion</li>
                            <li><strong>Frequency-weighted ranking:</strong> Popular queries first ‚Äî relevance vs recency vs personalization</li>
                            <li><strong>Debouncing:</strong> Wait 100-200ms between keystrokes ‚Äî reduce backend load vs perceived latency</li>
                        </ul>

                        <h4>2) Read vs Write Pattern & Latency</h4>
                        <ul>
                            <li><strong>Read:Write ratio:</strong> 10000:1 ‚Äî writes are aggregated search logs</li>
                            <li><strong>P50/P99 latency:</strong> 10ms/50ms ‚Äî must feel instant (under 100ms perceived)</li>
                            <li><strong>Optimization:</strong> Edge cache popular prefixes; pre-compute top-K suggestions</li>
                        </ul>

                        <h4>3) Core Data Stores</h4>
                        <ul>
                            <li><strong>Redis:</strong> Sorted sets for top suggestions per prefix ‚Äî <code>ZRANGE</code> for top-K</li>
                            <li><strong>Elasticsearch:</strong> Completion suggester ‚Äî supports fuzzy matching, multi-field</li>
                            <li><strong>Kafka + Flink:</strong> Aggregating search logs ‚Äî build frequency counts offline</li>
                        </ul>

                        <h4>4) One Failure Story</h4>
                        <div class="failure-story">
                            <strong>What breaks:</strong> Trending topic causes cache miss storm for new prefix<br>
                            <strong>Who feels pain:</strong> Users ‚Äî slow suggestions during breaking news/viral moments<br>
                            <strong>Mitigation:</strong> Request coalescing; real-time trending detection; fallback to cached stale data
                        </div>

                        <h4>5) Best Reference</h4>
                        <ul>
                            <li><a href="https://engineering.linkedin.com/search/did-you-mean-galene" target="_blank">LinkedIn Engineering: Search Suggestions</a> ‚Äî Typeahead with Galene and trie structures</li>
                            <li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-suggesters.html" target="_blank">Elasticsearch: Completion Suggester</a> ‚Äî Production-ready autocomplete implementation</li>
                        </ul>
                    </div>
                    <div class="practice-sidebar">
                        <h4>Practice Problems</h4>
                        <div class="practice-section">
                            <h5>Algorithm Practice</h5>
                            <a href="https://leetcode.com/problems/design-search-autocomplete-system/" target="_blank" class="practice-link">
                                <span>642. Autocomplete System</span>
                                <span class="difficulty hard">Hard</span>
                                <span class="source">LC</span>
                            </a>
                            <a href="https://leetcode.com/problems/implement-trie-prefix-tree/" target="_blank" class="practice-link">
                                <span>208. Implement Trie</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                        </div>
                        <div class="practice-section">
                            <h5>LLD / OOD Practice</h5>
                            <a href="https://github.com/ashishps1/awesome-low-level-design/blob/main/problems/search-autocomplete.md" target="_blank" class="practice-link">
                                <span>Autocomplete OOD</span>
                                <span class="source">GitHub</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== WEB CRAWLER ==================== -->
            <div class="cheat-sheet-problem" id="web-crawler">
                <h3>Web Crawler (Googlebot) <span class="difficulty-tag difficulty-hard">Hard</span></h3>
                <div class="problem-layout">
                    <div class="problem-content">
                        <h4>1) Key Algorithms & Core Tradeoffs</h4>
                        <ul>
                            <li><strong>BFS vs DFS traversal:</strong> BFS for breadth coverage; DFS for depth ‚Äî memory vs completeness</li>
                            <li><strong>URL frontier prioritization:</strong> PageRank, freshness, domain importance ‚Äî quality vs coverage</li>
                            <li><strong>Politeness:</strong> Respect robots.txt, rate limit per domain ‚Äî thoroughness vs being blocked</li>
                            <li><strong>Deduplication:</strong> URL normalization + content fingerprinting ‚Äî avoid redundant crawls</li>
                        </ul>

                        <h4>2) Read vs Write Pattern & Latency</h4>
                        <ul>
                            <li><strong>Read:Write ratio:</strong> 1:1 ‚Äî fetch page (read) then store (write)</li>
                            <li><strong>P50/P99 latency:</strong> Page fetch 200ms/2s (network bound); storage 10ms/100ms</li>
                            <li><strong>Optimization:</strong> Async I/O; parallel fetches; DNS caching</li>
                        </ul>

                        <h4>3) Core Data Stores</h4>
                        <ul>
                            <li><strong>Distributed Queue (Kafka):</strong> URL frontier ‚Äî partitioned by domain for politeness</li>
                            <li><strong>Bloom Filter:</strong> Seen URLs ‚Äî memory-efficient deduplication (false positives OK)</li>
                            <li><strong>Object Storage (S3):</strong> Raw HTML content ‚Äî cheap, durable, append-only</li>
                        </ul>

                        <h4>4) One Failure Story</h4>
                        <div class="failure-story">
                            <strong>What breaks:</strong> Spider trap ‚Äî infinite URL generation (calendars, session IDs)<br>
                            <strong>Who feels pain:</strong> Crawler ‚Äî wastes resources on one domain, starves others<br>
                            <strong>Mitigation:</strong> Max depth per domain; URL pattern detection; domain-level crawl budgets
                        </div>

                        <h4>5) Best Reference</h4>
                        <ul>
                            <li><a href="https://blog.twitter.com/engineering/en_us/a/2011/spiderduck-twitters-real-time-url-fetcher" target="_blank">Twitter Engineering: SpiderDuck</a> ‚Äî Real-time URL fetching with rate limiting per domain</li>
                            <li><a href="https://research.google/pubs/web-search-for-a-planet-the-google-cluster-architecture/" target="_blank">Google Research: Web Search Architecture</a> ‚Äî Crawling and indexing at Google scale</li>
                        </ul>
                    </div>
                    <div class="practice-sidebar">
                        <h4>Practice Problems</h4>
                        <div class="practice-section">
                            <h5>Algorithm Practice</h5>
                            <a href="https://leetcode.com/problems/web-crawler/" target="_blank" class="practice-link">
                                <span>1236. Web Crawler</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                            <a href="https://leetcode.com/problems/web-crawler-multithreaded/" target="_blank" class="practice-link">
                                <span>1242. Web Crawler MT</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                        </div>
                        <div class="practice-section">
                            <h5>LLD / OOD Practice</h5>
                            <a href="https://github.com/donnemartin/system-design-primer#design-a-web-crawler" target="_blank" class="practice-link">
                                <span>Web Crawler OOD</span>
                                <span class="source">GitHub</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== CLOUD STORAGE ==================== -->
            <div class="cheat-sheet-problem" id="cloud-storage">
                <h3>Cloud Storage (Dropbox/Google Drive) <span class="difficulty-tag difficulty-hard">Hard</span></h3>
                <div class="problem-layout">
                    <div class="problem-content">
                        <h4>1) Key Algorithms & Core Tradeoffs</h4>
                        <ul>
                            <li><strong>Block-level deduplication:</strong> Store unique 4MB blocks ‚Äî storage cost vs upload latency</li>
                            <li><strong>Delta sync:</strong> rsync-style ‚Äî bandwidth vs CPU for diff computation</li>
                            <li><strong>Content-addressable storage:</strong> Hash as key ‚Äî natural deduplication, immutable</li>
                            <li><strong>Conflict resolution:</strong> Last-write-wins vs branching ‚Äî simplicity vs data safety</li>
                        </ul>

                        <h4>2) Read vs Write Pattern & Latency</h4>
                        <ul>
                            <li><strong>Read:Write ratio:</strong> 3:1 ‚Äî more downloads/syncs than uploads</li>
                            <li><strong>P50/P99 latency:</strong> Metadata ops 50ms/200ms; file transfer bandwidth-bound</li>
                            <li><strong>Optimization:</strong> Local cache; sync queue for batch uploads; resume interrupted transfers</li>
                        </ul>

                        <h4>3) Core Data Stores</h4>
                        <ul>
                            <li><strong>Object Storage (S3):</strong> File blocks ‚Äî 11 9's durability, cross-region replication</li>
                            <li><strong>Metadata DB (MySQL/Spanner):</strong> File tree, permissions, versions ‚Äî ACID for consistency</li>
                            <li><strong>Notification Service:</strong> Real-time sync events ‚Äî push changes to other devices</li>
                        </ul>

                        <h4>4) One Failure Story</h4>
                        <div class="failure-story">
                            <strong>What breaks:</strong> Metadata DB leader failover during bulk upload<br>
                            <strong>Who feels pain:</strong> Users ‚Äî uploads stuck, file tree inconsistent across devices<br>
                            <strong>Mitigation:</strong> Client-side journaling; idempotent uploads with block hashes; reconciliation on reconnect
                        </div>

                        <h4>5) Best Reference</h4>
                        <ul>
                            <li><a href="https://dropbox.tech/infrastructure/magic-pocket-infrastructure" target="_blank">Dropbox Tech: Magic Pocket</a> ‚Äî Exabyte-scale storage with block deduplication</li>
                            <li><a href="https://dropbox.tech/infrastructure/rewriting-the-heart-of-our-sync-engine" target="_blank">Dropbox Tech: Sync Engine</a> ‚Äî Delta sync and conflict resolution at scale</li>
                        </ul>
                    </div>
                    <div class="practice-sidebar">
                        <h4>Practice Problems</h4>
                        <div class="practice-section">
                            <h5>Algorithm Practice</h5>
                            <a href="https://leetcode.com/problems/design-file-system/" target="_blank" class="practice-link">
                                <span>1166. Design File System</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                            <a href="https://leetcode.com/problems/design-in-memory-file-system/" target="_blank" class="practice-link">
                                <span>588. In-Memory File System</span>
                                <span class="difficulty hard">Hard</span>
                                <span class="source">LC</span>
                            </a>
                        </div>
                        <div class="practice-section">
                            <h5>LLD / OOD Practice</h5>
                            <a href="https://github.com/tssovi/grokking-the-object-oriented-design-interview/blob/master/object-oriented-design-case-studies/design-google-drive.md" target="_blank" class="practice-link">
                                <span>Google Drive OOD</span>
                                <span class="source">GitHub</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== RIDE SHARING ==================== -->
            <div class="cheat-sheet-problem" id="ride-sharing">
                <h3>Ride Sharing (Uber/Lyft) <span class="difficulty-tag difficulty-hard">Hard</span></h3>
                <div class="problem-layout">
                    <div class="problem-content">
                        <h4>1) Key Algorithms & Core Tradeoffs</h4>
                        <ul>
                            <li><strong>Geospatial indexing:</strong> Quadtree/Geohash for nearby drivers ‚Äî precision vs query speed</li>
                            <li><strong>Dispatch optimization:</strong> Hungarian algorithm / ML matching ‚Äî ETA accuracy vs fairness</li>
                            <li><strong>Surge pricing:</strong> Dynamic pricing based on supply/demand ‚Äî revenue vs user trust</li>
                            <li><strong>ETA prediction:</strong> ML on historical + real-time traffic ‚Äî accuracy vs computation cost</li>
                        </ul>

                        <h4>2) Read vs Write Pattern & Latency</h4>
                        <ul>
                            <li><strong>Read:Write ratio:</strong> 1:1 ‚Äî constant location updates (writes) and nearby queries (reads)</li>
                            <li><strong>P50/P99 latency:</strong> Match 500ms/2s; Location update 50ms/200ms</li>
                            <li><strong>Optimization:</strong> Batch location updates; pre-compute nearby candidates; geofenced caching</li>
                        </ul>

                        <h4>3) Core Data Stores</h4>
                        <ul>
                            <li><strong>Redis with geospatial:</strong> Real-time driver locations ‚Äî <code>GEOADD</code>/<code>GEORADIUS</code></li>
                            <li><strong>Kafka:</strong> Location event stream ‚Äî replay for analytics, ML training</li>
                            <li><strong>PostgreSQL + PostGIS:</strong> Trip history, user data ‚Äî spatial queries for analytics</li>
                        </ul>

                        <h4>4) One Failure Story</h4>
                        <div class="failure-story">
                            <strong>What breaks:</strong> Location service lag during concert end ‚Äî 50K people request rides simultaneously<br>
                            <strong>Who feels pain:</strong> Riders ‚Äî long match times, phantom drivers, ETA jumps<br>
                            <strong>Mitigation:</strong> Pre-position drivers for events; queue with ETA; degrade to larger radius search
                        </div>

                        <h4>5) Best Reference</h4>
                        <ul>
                            <li><a href="https://www.uber.com/blog/h3/" target="_blank">Uber Engineering: H3 Geospatial Index</a> ‚Äî Hexagonal hierarchical spatial index for matching</li>
                            <li><a href="https://www.uber.com/blog/engineering-an-efficient-dispatch-system/" target="_blank">Uber Engineering: Dispatch System</a> ‚Äî Real-time matching optimization (DISCO)</li>
                        </ul>
                    </div>
                    <div class="practice-sidebar">
                        <h4>Practice Problems</h4>
                        <div class="practice-section">
                            <h5>Algorithm Practice</h5>
                            <a href="https://leetcode.com/problems/k-closest-points-to-origin/" target="_blank" class="practice-link">
                                <span>973. K Closest Points</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                            <a href="https://leetcode.com/problems/design-tic-tac-toe/" target="_blank" class="practice-link">
                                <span>348. Design Tic-Tac-Toe</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                        </div>
                        <div class="practice-section">
                            <h5>LLD / OOD Practice</h5>
                            <a href="https://github.com/tssovi/grokking-the-object-oriented-design-interview/blob/master/object-oriented-design-case-studies/design-uber.md" target="_blank" class="practice-link">
                                <span>Uber OOD</span>
                                <span class="source">GitHub</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== E-COMMERCE ==================== -->
            <div class="cheat-sheet-problem" id="e-commerce">
                <h3>E-Commerce Platform (Amazon) <span class="difficulty-tag difficulty-hard">Hard</span></h3>
                <div class="problem-layout">
                    <div class="problem-content">
                        <h4>1) Key Algorithms & Core Tradeoffs</h4>
                        <ul>
                            <li><strong>Inventory reservation:</strong> Optimistic locking vs distributed locks ‚Äî throughput vs overselling</li>
                            <li><strong>Search ranking:</strong> Relevance + conversion + ads ‚Äî user experience vs revenue</li>
                            <li><strong>Cart persistence:</strong> Merge anonymous + logged-in carts ‚Äî UX vs complexity</li>
                            <li><strong>Recommendation engine:</strong> Collaborative filtering + item-based ‚Äî personalization vs cold start</li>
                        </ul>

                        <h4>2) Read vs Write Pattern & Latency</h4>
                        <ul>
                            <li><strong>Read:Write ratio:</strong> 100:1 ‚Äî browsing dominates; purchases rare but critical</li>
                            <li><strong>P50/P99 latency:</strong> Product page 100ms/500ms; Checkout 500ms/2s</li>
                            <li><strong>Optimization:</strong> Aggressive caching for catalog; synchronous only for payment</li>
                        </ul>

                        <h4>3) Core Data Stores</h4>
                        <ul>
                            <li><strong>Elasticsearch:</strong> Product search + faceted navigation ‚Äî full-text + aggregations</li>
                            <li><strong>MySQL/Aurora:</strong> Orders, inventory, users ‚Äî ACID for financial data</li>
                            <li><strong>Redis:</strong> Sessions, cart, real-time inventory counts ‚Äî sub-ms reads</li>
                        </ul>

                        <h4>4) One Failure Story</h4>
                        <div class="failure-story">
                            <strong>What breaks:</strong> Flash sale ‚Äî 100K users add same item simultaneously<br>
                            <strong>Who feels pain:</strong> Users ‚Äî cart shows item but checkout fails; overselling nightmare<br>
                            <strong>Mitigation:</strong> Queue-based checkout; inventory soft-reserve with TTL; honest stock counts
                        </div>

                        <h4>5) Best Reference</h4>
                        <ul>
                            <li><a href="https://www.aboutamazon.com/news/aws/what-you-need-to-know-about-amazon-dynamodb" target="_blank">Amazon: DynamoDB Origin Story</a> ‚Äî How Amazon built eventually consistent inventory at scale</li>
                            <li><a href="https://shopify.engineering/how-shopify-manages-billions-of-dollars-in-flash-sales" target="_blank">Shopify Engineering: Flash Sales</a> ‚Äî Inventory management during traffic spikes</li>
                        </ul>
                    </div>
                    <div class="practice-sidebar">
                        <h4>Practice Problems</h4>
                        <div class="practice-section">
                            <h5>Algorithm Practice</h5>
                            <a href="https://leetcode.com/problems/design-a-leaderboard/" target="_blank" class="practice-link">
                                <span>1244. Design Leaderboard</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                            <a href="https://leetcode.com/problems/top-k-frequent-elements/" target="_blank" class="practice-link">
                                <span>347. Top K Frequent</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                        </div>
                        <div class="practice-section">
                            <h5>LLD / OOD Practice</h5>
                            <a href="https://github.com/tssovi/grokking-the-object-oriented-design-interview/blob/master/object-oriented-design-case-studies/design-amazon.md" target="_blank" class="practice-link">
                                <span>Amazon OOD</span>
                                <span class="source">GitHub</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== PAYMENT SYSTEM ==================== -->
            <div class="cheat-sheet-problem" id="payment-system">
                <h3>Payment System (Stripe/PayPal) <span class="difficulty-tag difficulty-hard">Hard</span></h3>
                <div class="problem-layout">
                    <div class="problem-content">
                        <h4>1) Key Algorithms & Core Tradeoffs</h4>
                        <ul>
                            <li><strong>Idempotency keys:</strong> Exactly-once payment processing ‚Äî safety vs complexity</li>
                            <li><strong>Two-phase commit:</strong> Distributed transaction ‚Äî consistency vs availability</li>
                            <li><strong>Saga pattern:</strong> Compensating transactions for rollback ‚Äî eventual consistency vs complexity</li>
                            <li><strong>Double-entry ledger:</strong> Every transaction has debit + credit ‚Äî auditability vs performance</li>
                        </ul>

                        <h4>2) Read vs Write Pattern & Latency</h4>
                        <ul>
                            <li><strong>Read:Write ratio:</strong> 10:1 ‚Äî balance checks, history vs actual payments</li>
                            <li><strong>P50/P99 latency:</strong> Payment 300ms/1s; Balance query 20ms/100ms</li>
                            <li><strong>Optimization:</strong> Synchronous for payment; async for notifications, reconciliation</li>
                        </ul>

                        <h4>3) Core Data Stores</h4>
                        <ul>
                            <li><strong>PostgreSQL:</strong> Ledger, accounts ‚Äî serializable isolation, ACID guarantees</li>
                            <li><strong>Redis:</strong> Idempotency keys with TTL ‚Äî prevent duplicate charges</li>
                            <li><strong>Kafka:</strong> Event sourcing ‚Äî complete audit trail, replay capability</li>
                        </ul>

                        <h4>4) One Failure Story</h4>
                        <div class="failure-story">
                            <strong>What breaks:</strong> Network partition during payment ‚Äî client retries, potential double charge<br>
                            <strong>Who feels pain:</strong> Customer ‚Äî charged twice; merchant ‚Äî refund overhead, trust loss<br>
                            <strong>Mitigation:</strong> Idempotency keys mandatory; pending state with timeout; reconciliation jobs
                        </div>

                        <h4>5) Best Reference</h4>
                        <ul>
                            <li><a href="https://stripe.com/blog/idempotency" target="_blank">Stripe Engineering: Idempotency</a> ‚Äî Designing robust APIs for payment reliability</li>
                            <li><a href="https://developer.squareup.com/blog/payments-integration-design-patterns" target="_blank">Square Developer: Payment Patterns</a> ‚Äî Exactly-once semantics for transactions</li>
                        </ul>
                    </div>
                    <div class="practice-sidebar">
                        <h4>Practice Problems</h4>
                        <div class="practice-section">
                            <h5>Algorithm Practice</h5>
                            <a href="https://leetcode.com/problems/design-underground-system/" target="_blank" class="practice-link">
                                <span>1396. Underground System</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                            <a href="https://leetcode.com/problems/snapshot-array/" target="_blank" class="practice-link">
                                <span>1146. Snapshot Array</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                        </div>
                        <div class="practice-section">
                            <h5>LLD / OOD Practice</h5>
                            <a href="https://github.com/ashishps1/awesome-low-level-design/blob/main/problems/payment-gateway.md" target="_blank" class="practice-link">
                                <span>Payment Gateway OOD</span>
                                <span class="source">GitHub</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== MESSAGE QUEUE ==================== -->
            <div class="cheat-sheet-problem" id="message-queue">
                <h3>Distributed Message Queue (Kafka) <span class="difficulty-tag difficulty-hard">Hard</span></h3>
                <div class="problem-layout">
                    <div class="problem-content">
                        <h4>1) Key Algorithms & Core Tradeoffs</h4>
                        <ul>
                            <li><strong>Partitioning:</strong> Horizontal scaling ‚Äî ordering only within partition</li>
                            <li><strong>Replication:</strong> Leader + followers ‚Äî durability vs write latency (acks=all)</li>
                            <li><strong>Consumer groups:</strong> Parallel consumption ‚Äî throughput vs ordering guarantees</li>
                            <li><strong>Log compaction:</strong> Keep latest per key ‚Äî storage vs full history</li>
                        </ul>

                        <h4>2) Read vs Write Pattern & Latency</h4>
                        <ul>
                            <li><strong>Read:Write ratio:</strong> N:1 per message ‚Äî one write, consumed by N consumer groups</li>
                            <li><strong>P50/P99 latency:</strong> Produce 5ms/50ms (acks=1); Consume 1ms/10ms (sequential I/O)</li>
                            <li><strong>Optimization:</strong> Batching; zero-copy; page cache for hot data</li>
                        </ul>

                        <h4>3) Core Data Stores</h4>
                        <ul>
                            <li><strong>Append-only log (disk):</strong> Messages ‚Äî sequential writes, OS page cache</li>
                            <li><strong>ZooKeeper/KRaft:</strong> Cluster metadata, leader election ‚Äî consensus for coordination</li>
                            <li><strong>Consumer offset storage:</strong> Kafka internal topic or external DB ‚Äî exactly-once semantics</li>
                        </ul>

                        <h4>4) One Failure Story</h4>
                        <div class="failure-story">
                            <strong>What breaks:</strong> Slow consumer ‚Äî consumer group rebalances repeatedly<br>
                            <strong>Who feels pain:</strong> All consumers in group ‚Äî processing halts during rebalance, duplicates<br>
                            <strong>Mitigation:</strong> Tune session timeout; static membership; isolate slow consumers to separate group
                        </div>

                        <h4>5) Best Reference</h4>
                        <ul>
                            <li><a href="https://engineering.linkedin.com/distributed-systems/log-what-every-software-engineer-should-know-about-real-time-datas-unifying" target="_blank">LinkedIn Engineering: The Log</a> ‚Äî Jay Kreps' seminal post on distributed logs and Kafka</li>
                            <li><a href="https://engineering.linkedin.com/kafka/running-kafka-scale" target="_blank">LinkedIn Engineering: Kafka at Scale</a> ‚Äî 800B messages/day, 1100+ brokers</li>
                        </ul>
                    </div>
                    <div class="practice-sidebar">
                        <h4>Practice Problems</h4>
                        <div class="practice-section">
                            <h5>Algorithm Practice</h5>
                            <a href="https://leetcode.com/problems/design-bounded-blocking-queue/" target="_blank" class="practice-link">
                                <span>1188. Bounded Blocking Queue</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                            <a href="https://leetcode.com/problems/number-of-recent-calls/" target="_blank" class="practice-link">
                                <span>933. Number of Recent Calls</span>
                                <span class="difficulty easy">Easy</span>
                                <span class="source">LC</span>
                            </a>
                        </div>
                        <div class="practice-section">
                            <h5>LLD / OOD Practice</h5>
                            <a href="https://github.com/donnemartin/system-design-primer#design-a-message-queue" target="_blank" class="practice-link">
                                <span>Message Queue OOD</span>
                                <span class="source">GitHub</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== SEARCH ENGINE ==================== -->
            <div class="cheat-sheet-problem" id="search-engine">
                <h3>Search Engine (Elasticsearch/Google) <span class="difficulty-tag difficulty-hard">Hard</span></h3>
                <div class="problem-layout">
                    <div class="problem-content">
                        <h4>1) Key Algorithms & Core Tradeoffs</h4>
                        <ul>
                            <li><strong>Inverted index:</strong> Term ‚Üí document IDs ‚Äî fast lookup, expensive updates</li>
                            <li><strong>TF-IDF / BM25:</strong> Relevance scoring ‚Äî precision vs recall</li>
                            <li><strong>Sharding:</strong> Horizontal scaling ‚Äî query fan-out latency vs throughput</li>
                            <li><strong>Near real-time:</strong> Refresh interval (1s default) ‚Äî freshness vs indexing throughput</li>
                        </ul>

                        <h4>2) Read vs Write Pattern & Latency</h4>
                        <ul>
                            <li><strong>Read:Write ratio:</strong> 100:1 ‚Äî search queries dominate indexing</li>
                            <li><strong>P50/P99 latency:</strong> Search 20ms/200ms; Index 10ms/100ms (async)</li>
                            <li><strong>Optimization:</strong> Query caching; filter caching; doc values for aggregations</li>
                        </ul>

                        <h4>3) Core Data Stores</h4>
                        <ul>
                            <li><strong>Lucene segments:</strong> Immutable inverted index ‚Äî merge in background</li>
                            <li><strong>Translog:</strong> Write-ahead log ‚Äî durability before segment flush</li>
                            <li><strong>Cluster state:</strong> Metadata in memory ‚Äî index mappings, shard allocation</li>
                        </ul>

                        <h4>4) One Failure Story</h4>
                        <div class="failure-story">
                            <strong>What breaks:</strong> Mapping explosion ‚Äî too many fields, cluster state bloats<br>
                            <strong>Who feels pain:</strong> Cluster ‚Äî OOM on master nodes, cluster goes red<br>
                            <strong>Mitigation:</strong> Strict mappings; field limit settings; template governance
                        </div>

                        <h4>5) Best Reference</h4>
                        <ul>
                            <li><a href="https://www.elastic.co/blog/found-elasticsearch-from-the-bottom-up" target="_blank">Elastic Blog: Elasticsearch Bottom Up</a> ‚Äî Inverted index, Lucene segments, and scoring</li>
                            <li><a href="https://blog.twitter.com/engineering/en_us/a/2014/building-a-complete-tweet-index" target="_blank">Twitter Engineering: Tweet Index</a> ‚Äî Indexing billions of tweets with Lucene</li>
                        </ul>
                    </div>
                    <div class="practice-sidebar">
                        <h4>Practice Problems</h4>
                        <div class="practice-section">
                            <h5>Algorithm Practice</h5>
                            <a href="https://leetcode.com/problems/design-add-and-search-words-data-structure/" target="_blank" class="practice-link">
                                <span>211. Add/Search Words</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                            <a href="https://leetcode.com/problems/word-search-ii/" target="_blank" class="practice-link">
                                <span>212. Word Search II</span>
                                <span class="difficulty hard">Hard</span>
                                <span class="source">LC</span>
                            </a>
                        </div>
                        <div class="practice-section">
                            <h5>LLD / OOD Practice</h5>
                            <a href="https://github.com/donnemartin/system-design-primer#design-the-twitter-search" target="_blank" class="practice-link">
                                <span>Twitter Search OOD</span>
                                <span class="source">GitHub</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== AD CLICK AGGREGATOR ==================== -->
            <div class="cheat-sheet-problem" id="ad-click-aggregator">
                <h3>Ad Click Aggregator (Google Ads) <span class="difficulty-tag difficulty-hard">Hard</span></h3>
                <div class="problem-layout">
                    <div class="problem-content">
                        <h4>1) Key Algorithms & Core Tradeoffs</h4>
                        <ul>
                            <li><strong>Stream processing:</strong> Real-time aggregation (Flink/Spark) ‚Äî latency vs accuracy (late events)</li>
                            <li><strong>Watermarks:</strong> Handle out-of-order events ‚Äî completeness vs latency</li>
                            <li><strong>HyperLogLog:</strong> Approximate unique counts ‚Äî memory vs precision (2% error)</li>
                            <li><strong>Lambda architecture:</strong> Real-time + batch ‚Äî complexity vs accuracy reconciliation</li>
                        </ul>

                        <h4>2) Read vs Write Pattern & Latency</h4>
                        <ul>
                            <li><strong>Read:Write ratio:</strong> 1:1000 ‚Äî massive click ingestion, periodic dashboard queries</li>
                            <li><strong>P50/P99 latency:</strong> Ingestion 10ms/100ms; Aggregated view 1min/5min staleness</li>
                            <li><strong>Optimization:</strong> Pre-aggregate by time window; materialize common dimensions</li>
                        </ul>

                        <h4>3) Core Data Stores</h4>
                        <ul>
                            <li><strong>Kafka:</strong> Click event stream ‚Äî partitioned by ad_id for ordering</li>
                            <li><strong>ClickHouse/Druid:</strong> OLAP queries ‚Äî columnar storage, fast aggregations</li>
                            <li><strong>Redis:</strong> Real-time counters for fraud detection ‚Äî sub-second updates</li>
                        </ul>

                        <h4>4) One Failure Story</h4>
                        <div class="failure-story">
                            <strong>What breaks:</strong> Kafka consumer lag during traffic spike ‚Äî aggregations hours behind<br>
                            <strong>Who feels pain:</strong> Advertisers ‚Äî dashboards show stale data, budget decisions delayed<br>
                            <strong>Mitigation:</strong> Auto-scaling consumers; sampling under load; SLA tiers for real-time vs batch
                        </div>

                        <h4>5) Best Reference</h4>
                        <ul>
                            <li><a href="https://engineering.fb.com/2016/06/28/core-infra/data-infrastructure-at-facebook/" target="_blank">Meta Engineering: Data Infrastructure</a> ‚Äî Petabyte-scale real-time analytics</li>
                            <li><a href="https://www.uber.com/blog/pinot-real-time-analytics/" target="_blank">Uber Engineering: Apache Pinot</a> ‚Äî Real-time OLAP for click aggregation</li>
                        </ul>
                    </div>
                    <div class="practice-sidebar">
                        <h4>Practice Problems</h4>
                        <div class="practice-section">
                            <h5>Algorithm Practice</h5>
                            <a href="https://leetcode.com/problems/find-median-from-data-stream/" target="_blank" class="practice-link">
                                <span>295. Find Median Stream</span>
                                <span class="difficulty hard">Hard</span>
                                <span class="source">LC</span>
                            </a>
                            <a href="https://leetcode.com/problems/sliding-window-maximum/" target="_blank" class="practice-link">
                                <span>239. Sliding Window Max</span>
                                <span class="difficulty hard">Hard</span>
                                <span class="source">LC</span>
                            </a>
                        </div>
                        <div class="practice-section">
                            <h5>LLD / OOD Practice</h5>
                            <a href="https://www.educative.io/courses/grokking-modern-system-design/ad-click-event-aggregation" target="_blank" class="practice-link">
                                <span>Click Aggregator OOD</span>
                                <span class="source">Educative</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== PROXIMITY SERVICE ==================== -->
            <div class="cheat-sheet-problem" id="proximity-service">
                <h3>Proximity Service (Yelp/Google Maps) <span class="difficulty-tag difficulty-medium">Medium</span></h3>
                <div class="problem-layout">
                    <div class="problem-content">
                        <h4>1) Key Algorithms & Core Tradeoffs</h4>
                        <ul>
                            <li><strong>Geohash:</strong> Encode lat/lng to string ‚Äî prefix matching for nearby, boundary issues</li>
                            <li><strong>Quadtree:</strong> Recursive spatial partitioning ‚Äî dynamic density handling</li>
                            <li><strong>R-tree:</strong> Bounding rectangles ‚Äî good for range queries, complex updates</li>
                            <li><strong>Haversine formula:</strong> Accurate distance ‚Äî CPU cost vs flat-earth approximation</li>
                        </ul>

                        <h4>2) Read vs Write Pattern & Latency</h4>
                        <ul>
                            <li><strong>Read:Write ratio:</strong> 1000:1 ‚Äî searches dominate; business updates rare</li>
                            <li><strong>P50/P99 latency:</strong> Nearby search 50ms/200ms; Business update 100ms/500ms</li>
                            <li><strong>Optimization:</strong> Cache popular areas; pre-compute for common radii (1km, 5km)</li>
                        </ul>

                        <h4>3) Core Data Stores</h4>
                        <ul>
                            <li><strong>Elasticsearch with geo_point:</strong> Full-text + spatial ‚Äî "coffee near me"</li>
                            <li><strong>Redis with geospatial:</strong> Real-time location queries ‚Äî in-memory speed</li>
                            <li><strong>PostgreSQL + PostGIS:</strong> Complex spatial queries ‚Äî polygons, routes</li>
                        </ul>

                        <h4>4) One Failure Story</h4>
                        <div class="failure-story">
                            <strong>What breaks:</strong> Geohash boundary ‚Äî user at edge misses nearby results<br>
                            <strong>Who feels pain:</strong> User ‚Äî restaurant 100m away not shown because different geohash<br>
                            <strong>Mitigation:</strong> Query adjacent geohash cells; use overlapping grid; post-filter by actual distance
                        </div>

                        <h4>5) Best Reference</h4>
                        <ul>
                            <li><a href="https://www.uber.com/blog/h3/" target="_blank">Uber Engineering: H3</a> ‚Äî Hexagonal hierarchical spatial index (open source)</li>
                            <li><a href="https://blog.yelp.com/2017/10/engineering-search-at-yelp/" target="_blank">Yelp Engineering: Search</a> ‚Äî Geospatial search with Elasticsearch</li>
                        </ul>
                    </div>
                    <div class="practice-sidebar">
                        <h4>Practice Problems</h4>
                        <div class="practice-section">
                            <h5>Algorithm Practice</h5>
                            <a href="https://leetcode.com/problems/k-closest-points-to-origin/" target="_blank" class="practice-link">
                                <span>973. K Closest Points</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                            <a href="https://leetcode.com/problems/design-hashset/" target="_blank" class="practice-link">
                                <span>705. Design HashSet</span>
                                <span class="difficulty easy">Easy</span>
                                <span class="source">LC</span>
                            </a>
                        </div>
                        <div class="practice-section">
                            <h5>LLD / OOD Practice</h5>
                            <a href="https://github.com/tssovi/grokking-the-object-oriented-design-interview/blob/master/object-oriented-design-case-studies/design-yelp.md" target="_blank" class="practice-link">
                                <span>Yelp OOD</span>
                                <span class="source">GitHub</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== COLLABORATIVE EDITING ==================== -->
            <div class="cheat-sheet-problem" id="collaborative-editing">
                <h3>Collaborative Editing (Google Docs) <span class="difficulty-tag difficulty-hard">Hard</span></h3>
                <div class="problem-layout">
                    <div class="problem-content">
                        <h4>1) Key Algorithms & Core Tradeoffs</h4>
                        <ul>
                            <li><strong>Operational Transformation (OT):</strong> Transform concurrent ops ‚Äî proven but complex server</li>
                            <li><strong>CRDT:</strong> Conflict-free merge ‚Äî simpler, larger metadata overhead</li>
                            <li><strong>Last-write-wins:</strong> Simple but loses data ‚Äî not suitable for text</li>
                            <li><strong>Cursor/selection sync:</strong> Presence awareness ‚Äî bandwidth vs UX</li>
                        </ul>

                        <h4>2) Read vs Write Pattern & Latency</h4>
                        <ul>
                            <li><strong>Read:Write ratio:</strong> 1:10 per active session ‚Äî keystrokes dominate</li>
                            <li><strong>P50/P99 latency:</strong> Op broadcast 50ms/150ms; must feel synchronous</li>
                            <li><strong>Optimization:</strong> Local-first with background sync; batch ops; operation log compaction</li>
                        </ul>

                        <h4>3) Core Data Stores</h4>
                        <ul>
                            <li><strong>Document store (MongoDB/Firestore):</strong> Document snapshots ‚Äî periodic persistence</li>
                            <li><strong>Operation log (append-only):</strong> Edit history ‚Äî replay for undo, versioning</li>
                            <li><strong>WebSocket servers:</strong> Real-time broadcast ‚Äî stateful, sticky sessions</li>
                        </ul>

                        <h4>4) One Failure Story</h4>
                        <div class="failure-story">
                            <strong>What breaks:</strong> Server crash loses in-flight ops ‚Äî user edits vanish<br>
                            <strong>Who feels pain:</strong> Users ‚Äî lost work, document diverges between collaborators<br>
                            <strong>Mitigation:</strong> Client-side op queue with ACK; server replication; periodic snapshots
                        </div>

                        <h4>5) Best Reference</h4>
                        <ul>
                            <li><a href="https://www.figma.com/blog/how-figmas-multiplayer-technology-works/" target="_blank">Figma Engineering: Multiplayer</a> ‚Äî CRDTs for real-time collaborative design</li>
                            <li><a href="https://www.inkandswitch.com/local-first/" target="_blank">Ink & Switch: Local-First Software</a> ‚Äî CRDTs vs OT deep dive with tradeoffs</li>
                        </ul>
                    </div>
                    <div class="practice-sidebar">
                        <h4>Practice Problems</h4>
                        <div class="practice-section">
                            <h5>Algorithm Practice</h5>
                            <a href="https://leetcode.com/problems/design-a-text-editor/" target="_blank" class="practice-link">
                                <span>2296. Design Text Editor</span>
                                <span class="difficulty hard">Hard</span>
                                <span class="source">LC</span>
                            </a>
                            <a href="https://leetcode.com/problems/snapshot-array/" target="_blank" class="practice-link">
                                <span>1146. Snapshot Array</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                        </div>
                        <div class="practice-section">
                            <h5>LLD / OOD Practice</h5>
                            <a href="https://github.com/ashishps1/awesome-low-level-design/blob/main/problems/text-editor.md" target="_blank" class="practice-link">
                                <span>Text Editor OOD</span>
                                <span class="source">GitHub</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== STOCK EXCHANGE ==================== -->
            <div class="cheat-sheet-problem" id="stock-exchange">
                <h3>Stock Exchange (NASDAQ) <span class="difficulty-tag difficulty-hard">Hard</span></h3>
                <div class="problem-layout">
                    <div class="problem-content">
                        <h4>1) Key Algorithms & Core Tradeoffs</h4>
                        <ul>
                            <li><strong>Order matching:</strong> Price-time priority FIFO ‚Äî fairness vs throughput</li>
                            <li><strong>Limit order book:</strong> Sorted bids/asks ‚Äî O(log n) insert, O(1) match</li>
                            <li><strong>Sequencer:</strong> Total ordering of events ‚Äî single point of serialization</li>
                            <li><strong>Market data fan-out:</strong> Multicast to subscribers ‚Äî latency vs reliability</li>
                        </ul>

                        <h4>2) Read vs Write Pattern & Latency</h4>
                        <ul>
                            <li><strong>Read:Write ratio:</strong> 100:1 ‚Äî many quote queries per order</li>
                            <li><strong>P50/P99 latency:</strong> Order processing 10Œºs/100Œºs; market data 1ms/10ms</li>
                            <li><strong>Optimization:</strong> In-memory everything; kernel bypass (DPDK); co-location</li>
                        </ul>

                        <h4>3) Core Data Stores</h4>
                        <ul>
                            <li><strong>In-memory order book:</strong> Red-black tree or skip list ‚Äî microsecond operations</li>
                            <li><strong>Sequenced journal:</strong> Append-only log ‚Äî replay, audit, disaster recovery</li>
                            <li><strong>Time-series DB:</strong> Trade history, OHLC candles ‚Äî analytics, regulatory</li>
                        </ul>

                        <h4>4) One Failure Story</h4>
                        <div class="failure-story">
                            <strong>What breaks:</strong> Sequencer failover ‚Äî 500ms gap, orders processed out of sequence<br>
                            <strong>Who feels pain:</strong> Traders ‚Äî unfair fills, regulatory scrutiny, arbitrage losses<br>
                            <strong>Mitigation:</strong> Hot standby sequencer; sequence number validation; halt trading during recovery
                        </div>

                        <h4>5) Best Reference</h4>
                        <ul>
                            <li><a href="https://www.lmax.com/exchange/technical-papers" target="_blank">LMAX Exchange: Technical Papers</a> ‚Äî Disruptor pattern for 6M orders/sec</li>
                            <li><a href="https://queue.acm.org/detail.cfm?id=2658164" target="_blank">ACM Queue: Trading System Design</a> ‚Äî Latency engineering for financial systems</li>
                        </ul>
                    </div>
                    <div class="practice-sidebar">
                        <h4>Practice Problems</h4>
                        <div class="practice-section">
                            <h5>Algorithm Practice</h5>
                            <a href="https://leetcode.com/problems/design-a-leaderboard/" target="_blank" class="practice-link">
                                <span>1244. Design Leaderboard</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                            <a href="https://leetcode.com/problems/stock-price-fluctuation/" target="_blank" class="practice-link">
                                <span>2034. Stock Price Fluctuation</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                        </div>
                        <div class="practice-section">
                            <h5>LLD / OOD Practice</h5>
                            <a href="https://github.com/tssovi/grokking-the-object-oriented-design-interview/blob/master/object-oriented-design-case-studies/design-stock-brokerage.md" target="_blank" class="practice-link">
                                <span>Stock Brokerage OOD</span>
                                <span class="source">GitHub</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== BOOKING SYSTEM ==================== -->
            <div class="cheat-sheet-problem" id="booking-system">
                <h3>Hotel/Flight Booking (Booking.com/Expedia) <span class="difficulty-tag difficulty-medium">Medium</span></h3>
                <div class="problem-layout">
                    <div class="problem-content">
                        <h4>1) Key Algorithms & Core Tradeoffs</h4>
                        <ul>
                            <li><strong>Inventory management:</strong> Optimistic vs pessimistic locking ‚Äî throughput vs overbooking</li>
                            <li><strong>Search ranking:</strong> Price, rating, commission ‚Äî user value vs revenue</li>
                            <li><strong>Price caching:</strong> Stale prices OK for search, fresh for booking ‚Äî performance vs accuracy</li>
                            <li><strong>Reservation hold:</strong> TTL-based soft lock ‚Äî UX vs inventory blocking</li>
                        </ul>

                        <h4>2) Read vs Write Pattern & Latency</h4>
                        <ul>
                            <li><strong>Read:Write ratio:</strong> 1000:1 ‚Äî searches massively exceed bookings</li>
                            <li><strong>P50/P99 latency:</strong> Search 200ms/1s; Booking 500ms/3s (payment involved)</li>
                            <li><strong>Optimization:</strong> Cache search results aggressively; real-time only for final booking</li>
                        </ul>

                        <h4>3) Core Data Stores</h4>
                        <ul>
                            <li><strong>Elasticsearch:</strong> Property search ‚Äî filters, geo, full-text</li>
                            <li><strong>MySQL/PostgreSQL:</strong> Bookings, inventory ‚Äî ACID for reservation</li>
                            <li><strong>Redis:</strong> Availability cache, session ‚Äî fast availability checks</li>
                        </ul>

                        <h4>4) One Failure Story</h4>
                        <div class="failure-story">
                            <strong>What breaks:</strong> Flash sale on popular hotel ‚Äî double booking same room<br>
                            <strong>Who feels pain:</strong> Guest ‚Äî arrives to no room; hotel ‚Äî angry customer, comped stay<br>
                            <strong>Mitigation:</strong> Serialized booking per room; inventory buffer; graceful overbooking policy
                        </div>

                        <h4>5) Best Reference</h4>
                        <ul>
                            <li><a href="https://medium.com/airbnb-engineering/how-airbnb-avoids-double-payments-f93e3a83fe6e" target="_blank">Airbnb Engineering: Avoiding Double Payments</a> ‚Äî Idempotency in booking transactions</li>
                            <li><a href="https://blog.booking.com/architecture-systems-availability.html" target="_blank">Booking.com: Systems Availability</a> ‚Äî High availability for reservation systems</li>
                        </ul>
                    </div>
                    <div class="practice-sidebar">
                        <h4>Practice Problems</h4>
                        <div class="practice-section">
                            <h5>Algorithm Practice</h5>
                            <a href="https://leetcode.com/problems/my-calendar-i/" target="_blank" class="practice-link">
                                <span>729. My Calendar I</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                            <a href="https://leetcode.com/problems/meeting-rooms-ii/" target="_blank" class="practice-link">
                                <span>253. Meeting Rooms II</span>
                                <span class="difficulty medium">Med</span>
                                <span class="source">LC</span>
                            </a>
                        </div>
                        <div class="practice-section">
                            <h5>LLD / OOD Practice</h5>
                            <a href="https://github.com/tssovi/grokking-the-object-oriented-design-interview/blob/master/object-oriented-design-case-studies/design-airbnb.md" target="_blank" class="practice-link">
                                <span>Airbnb OOD</span>
                                <span class="source">GitHub</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="flex flex-between mt-4">
                <a href="index.html" class="btn btn-secondary">‚Üê Back to Overview</a>
                <a href="module-07.html" class="btn btn-primary">Framework Mastery ‚Üí</a>
            </div>

        </main>
    </div>

    <script src="../assets/js/app.js"></script>
    <script>
        // Sidebar toggle for mobile
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebarOverlay = document.getElementById('sidebarOverlay');

        sidebarToggle.addEventListener('click', function() {
            sidebar.classList.toggle('open');
            sidebarOverlay.classList.toggle('open');
        });

        sidebarOverlay.addEventListener('click', function() {
            sidebar.classList.remove('open');
            sidebarOverlay.classList.remove('open');
        });

        // Smooth scroll for TOC links
        document.querySelectorAll('.toc-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
        });
    </script>
</body>
</html>
