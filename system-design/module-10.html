<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 10: Numbers to Know - Staff Engineer Prep</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="../index.html" class="logo">StaffEngPrep</a>
            <ul class="nav-links">
                <li><a href="../coding-rounds/index.html">Coding</a></li>
                <li><a href="index.html" style="color: var(--primary-color);">System Design</a></li>
                <li><a href="../company-specific/index.html">Companies</a></li>
                <li><a href="../behavioral/index.html">Behavioral</a></li>
                <li><a href="../generative-ai/index.html">Gen AI</a></li>
            </ul>
        </div>
    </nav>

    <div class="layout-with-sidebar">
        <!-- Left Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <nav class="sidebar-nav">
                <div class="sidebar-section">
                    <div class="sidebar-section-title">Getting Started</div>
                    <a href="index.html" class="sidebar-link">Introduction</a>
                </div>

                <div class="sidebar-section">
                    <div class="sidebar-section-title">Core Concepts</div>
                    <a href="module-01.html" class="sidebar-link" data-module="1">
                        <span class="sidebar-link-number">1</span>Scalability Fundamentals
                    </a>
                    <a href="module-02.html" class="sidebar-link" data-module="2">
                        <span class="sidebar-link-number">2</span>Database Systems
                    </a>
                    <a href="module-03.html" class="sidebar-link" data-module="3">
                        <span class="sidebar-link-number">3</span>Distributed Systems
                    </a>
                    <a href="module-04.html" class="sidebar-link" data-module="4">
                        <span class="sidebar-link-number">4</span>Storage & Data Processing
                    </a>
                    <a href="module-05.html" class="sidebar-link" data-module="5">
                        <span class="sidebar-link-number">5</span>Seminal Papers
                    </a>
                    <a href="module-09.html" class="sidebar-link" data-module="9">
                        <span class="sidebar-link-number">6</span>API Design
                    </a>
                    <a href="module-10.html" class="sidebar-link active" data-module="10">
                        <span class="sidebar-link-number">7</span>Numbers to Know
                    </a>
                </div>

                <div class="sidebar-section">
                    <div class="sidebar-section-title">Patterns</div>
                    <a href="module-11.html" class="sidebar-link" data-module="11">
                        <span class="sidebar-link-number">8</span>Real-time Updates
                    </a>
                    <a href="module-12.html" class="sidebar-link" data-module="12">
                        <span class="sidebar-link-number">9</span>Rate Limiting
                    </a>
                </div>

                <div class="sidebar-section">
                    <div class="sidebar-section-title">Problem Breakdowns</div>
                    <a href="module-06.html" class="sidebar-link" data-module="6">
                        <span class="sidebar-link-number">10</span>Common Problems
                    </a>
                </div>

                <div class="sidebar-section">
                    <div class="sidebar-section-title">Interview Prep</div>
                    <a href="module-07.html" class="sidebar-link" data-module="7">
                        <span class="sidebar-link-number">11</span>Framework Mastery
                    </a>
                    <a href="module-08.html" class="sidebar-link" data-module="8">
                        <span class="sidebar-link-number">12</span>Mock Interviews
                    </a>
                </div>
            </nav>
        </aside>

        <button class="sidebar-toggle" id="sidebarToggle">☰</button>
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <main class="main-content">
            <h1>Module 10: Numbers to Know</h1>

            <div class="card mt-3">
                <h3>Learning Objectives</h3>
                <ul>
                    <li>Memorize key latency numbers for quick estimation</li>
                    <li>Calculate storage and bandwidth requirements</li>
                    <li>Understand powers of 2 and common scale factors</li>
                    <li>Perform back-of-envelope calculations confidently</li>
                </ul>
            </div>

            <h2 class="mt-4">Latency Numbers Every Programmer Should Know</h2>

            <div class="card">
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background: var(--border-color);">
                            <th style="padding: 0.75rem; border: 1px solid var(--border-color); text-align: left;">Operation</th>
                            <th style="padding: 0.75rem; border: 1px solid var(--border-color); text-align: right;">Latency</th>
                            <th style="padding: 0.75rem; border: 1px solid var(--border-color); text-align: left;">Notes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">L1 cache reference</td><td style="padding: 0.75rem; border: 1px solid var(--border-color); text-align: right;">0.5 ns</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">-</td></tr>
                        <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">L2 cache reference</td><td style="padding: 0.75rem; border: 1px solid var(--border-color); text-align: right;">7 ns</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">14x L1</td></tr>
                        <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">Main memory reference</td><td style="padding: 0.75rem; border: 1px solid var(--border-color); text-align: right;">100 ns</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">20x L2, 200x L1</td></tr>
                        <tr style="background: var(--success-bg);"><td style="padding: 0.75rem; border: 1px solid var(--border-color);"><strong>SSD random read</strong></td><td style="padding: 0.75rem; border: 1px solid var(--border-color); text-align: right;"><strong>150 μs</strong></td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">~1,500x memory</td></tr>
                        <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">HDD seek</td><td style="padding: 0.75rem; border: 1px solid var(--border-color); text-align: right;">10 ms</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">20x SSD</td></tr>
                        <tr style="background: var(--success-bg);"><td style="padding: 0.75rem; border: 1px solid var(--border-color);"><strong>Same datacenter RTT</strong></td><td style="padding: 0.75rem; border: 1px solid var(--border-color); text-align: right;"><strong>0.5 ms</strong></td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">Key for microservices</td></tr>
                        <tr style="background: var(--success-bg);"><td style="padding: 0.75rem; border: 1px solid var(--border-color);"><strong>Cross-region RTT</strong></td><td style="padding: 0.75rem; border: 1px solid var(--border-color); text-align: right;"><strong>~150 ms</strong></td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">Speed of light limit</td></tr>
                        <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">Send 1 MB over 1 Gbps</td><td style="padding: 0.75rem; border: 1px solid var(--border-color); text-align: right;">10 ms</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">-</td></tr>
                        <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">Read 1 MB sequentially (SSD)</td><td style="padding: 0.75rem; border: 1px solid var(--border-color); text-align: right;">1 ms</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">-</td></tr>
                        <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">Read 1 MB sequentially (HDD)</td><td style="padding: 0.75rem; border: 1px solid var(--border-color); text-align: right;">20 ms</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">20x SSD</td></tr>
                    </tbody>
                </table>
            </div>

            <div class="card mt-3" style="background: var(--success-bg);">
                <strong>Key Takeaways:</strong>
                <ul>
                    <li>Memory is 1000x faster than SSD</li>
                    <li>SSD is 100x faster than HDD</li>
                    <li>Network within datacenter: ~0.5ms</li>
                    <li>Network across regions: ~150ms</li>
                </ul>
            </div>

            <h2 class="mt-4">Powers of 2</h2>

            <div class="collapsible open">
                <div class="collapsible-header">
                    <span>Common Powers of 2</span>
                    <span class="collapsible-icon">&#9660;</span>
                </div>
                <div class="collapsible-content">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: var(--border-color);">
                                <th style="padding: 0.75rem; border: 1px solid var(--border-color);">Power</th>
                                <th style="padding: 0.75rem; border: 1px solid var(--border-color);">Exact Value</th>
                                <th style="padding: 0.75rem; border: 1px solid var(--border-color);">Approx</th>
                                <th style="padding: 0.75rem; border: 1px solid var(--border-color);">Name</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">2^10</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">1,024</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">~1 thousand</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">1 KB</td></tr>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">2^20</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">1,048,576</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">~1 million</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">1 MB</td></tr>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">2^30</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">1,073,741,824</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">~1 billion</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">1 GB</td></tr>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">2^40</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">~1 trillion</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">~1 trillion</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">1 TB</td></tr>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">2^50</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">~1 quadrillion</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">~1 quadrillion</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">1 PB</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <h2 class="mt-4">Time Conversions</h2>

            <div class="collapsible open">
                <div class="collapsible-header">
                    <span>Useful Time Calculations</span>
                    <span class="collapsible-icon">&#9660;</span>
                </div>
                <div class="collapsible-content">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: var(--border-color);">
                                <th style="padding: 0.75rem; border: 1px solid var(--border-color);">Period</th>
                                <th style="padding: 0.75rem; border: 1px solid var(--border-color);">Seconds</th>
                                <th style="padding: 0.75rem; border: 1px solid var(--border-color);">Useful For</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">1 day</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">86,400 (~100K)</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">Daily active users</td></tr>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">1 week</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">604,800 (~600K)</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">Weekly metrics</td></tr>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">1 month</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">2.6M (~2.5M)</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">Monthly active users</td></tr>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">1 year</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">31.5M (~30M)</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">Annual storage growth</td></tr>
                        </tbody>
                    </table>

                    <div class="card mt-3" style="background: var(--code-bg); color: #e2e8f0;">
                        <strong>Quick Calculations:</strong><br>
                        - 1 day = 86,400 seconds ≈ 100,000 seconds<br>
                        - 1 year = 365 days ≈ 30 million seconds<br>
                        - 1 million requests/day = ~12 requests/second<br>
                        - 100 million requests/day = ~1,200 requests/second
                    </div>
                </div>
            </div>

            <h2 class="mt-4">Typical System Numbers</h2>

            <div class="collapsible open">
                <div class="collapsible-header">
                    <span>Throughput & Capacity</span>
                    <span class="collapsible-icon">&#9660;</span>
                </div>
                <div class="collapsible-content">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: var(--border-color);">
                                <th style="padding: 0.75rem; border: 1px solid var(--border-color);">Component</th>
                                <th style="padding: 0.75rem; border: 1px solid var(--border-color);">Throughput</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">Single web server</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">1,000-10,000 RPS</td></tr>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">MySQL (simple queries)</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">1,000-5,000 QPS</td></tr>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">Redis</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">100,000+ ops/sec</td></tr>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">Kafka (per partition)</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">10,000-100,000 msg/sec</td></tr>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">Load balancer</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">100,000+ RPS</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <h2 class="mt-4">Data Size Estimates</h2>

            <div class="collapsible">
                <div class="collapsible-header">
                    <span>Common Object Sizes</span>
                    <span class="collapsible-icon">&#9660;</span>
                </div>
                <div class="collapsible-content">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: var(--border-color);">
                                <th style="padding: 0.75rem; border: 1px solid var(--border-color);">Item</th>
                                <th style="padding: 0.75rem; border: 1px solid var(--border-color);">Size</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">char</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">1-4 bytes (UTF-8)</td></tr>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">int/long</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">4-8 bytes</td></tr>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">UUID</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">16 bytes (36 chars as string)</td></tr>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">Tweet/SMS</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">~500 bytes with metadata</td></tr>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">Web page HTML</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">~100 KB</td></tr>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">JPEG image (compressed)</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">~300 KB</td></tr>
                            <tr><td style="padding: 0.75rem; border: 1px solid var(--border-color);">Video (1 min, 720p)</td><td style="padding: 0.75rem; border: 1px solid var(--border-color);">~50 MB</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Interactive Capacity Calculator -->
            <h2 class="mt-4">Interactive: Capacity Estimation Calculator</h2>

            <div class="interactive-demo">
                <h4>Back-of-Envelope Calculator</h4>
                <p class="text-muted">Enter your requirements and see instant calculations for storage, bandwidth, and QPS.</p>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 1rem 0;">
                    <div class="form-group">
                        <label style="font-weight: 600; display: block; margin-bottom: 0.5rem;">Daily Active Users</label>
                        <input type="number" id="calc-dau" value="100000000" style="width: 100%; padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 0.25rem;">
                    </div>
                    <div class="form-group">
                        <label style="font-weight: 600; display: block; margin-bottom: 0.5rem;">Actions per User per Day</label>
                        <input type="number" id="calc-actions" value="10" style="width: 100%; padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 0.25rem;">
                    </div>
                    <div class="form-group">
                        <label style="font-weight: 600; display: block; margin-bottom: 0.5rem;">Avg Object Size (bytes)</label>
                        <input type="number" id="calc-size" value="1000" style="width: 100%; padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 0.25rem;">
                    </div>
                    <div class="form-group">
                        <label style="font-weight: 600; display: block; margin-bottom: 0.5rem;">Read:Write Ratio</label>
                        <input type="number" id="calc-ratio" value="10" style="width: 100%; padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 0.25rem;">
                    </div>
                </div>

                <button class="btn btn-primary" onclick="calculateCapacity()">Calculate</button>

                <div id="calc-results" class="mt-3" style="display: none;">
                    <h5>Results</h5>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                        <div class="card" style="text-align: center; padding: 1rem;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary-color);" id="result-write-qps">0</div>
                            <div style="font-size: 0.85rem; color: var(--text-light);">Write QPS</div>
                        </div>
                        <div class="card" style="text-align: center; padding: 1rem;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary-color);" id="result-read-qps">0</div>
                            <div style="font-size: 0.85rem; color: var(--text-light);">Read QPS</div>
                        </div>
                        <div class="card" style="text-align: center; padding: 1rem;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: var(--secondary-color);" id="result-daily-storage">0</div>
                            <div style="font-size: 0.85rem; color: var(--text-light);">Daily Storage</div>
                        </div>
                        <div class="card" style="text-align: center; padding: 1rem;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: var(--secondary-color);" id="result-yearly-storage">0</div>
                            <div style="font-size: 0.85rem; color: var(--text-light);">Yearly Storage</div>
                        </div>
                        <div class="card" style="text-align: center; padding: 1rem;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: var(--warning-color);" id="result-bandwidth">0</div>
                            <div style="font-size: 0.85rem; color: var(--text-light);">Peak Bandwidth</div>
                        </div>
                    </div>
                    <div class="callout callout-info mt-2" id="calc-breakdown"></div>
                </div>
            </div>

            <h2 class="mt-4">Example: Twitter Capacity Estimation</h2>

            <div class="card" style="background: var(--code-bg); color: #e2e8f0;">
                <strong>Given:</strong><br>
                - 500M daily active users<br>
                - Average user posts 2 tweets/day<br>
                - Average tweet = 500 bytes<br>
                - 20% tweets have media (avg 1MB)<br><br>

                <strong>Calculations:</strong><br>
                <br>
                <strong>1. Write QPS:</strong><br>
                - Tweets/day = 500M * 2 = 1B tweets<br>
                - Tweets/second = 1B / 86,400 ≈ 12,000 QPS<br>
                - Peak (2x average) ≈ 24,000 QPS<br>
                <br>
                <strong>2. Storage (daily):</strong><br>
                - Text: 1B * 500 bytes = 500 GB<br>
                - Media: 1B * 0.2 * 1MB = 200 TB<br>
                - Total daily: ~200 TB<br>
                <br>
                <strong>3. Bandwidth:</strong><br>
                - Write: 200 TB / 86,400s ≈ 2.3 GB/s<br>
                - Read (10:1 ratio): ~23 GB/s
            </div>

            <!-- Flashcards for Memorization -->
            <h2 class="mt-4">Flashcards: Numbers to Memorize</h2>
            <p class="text-muted">Flip through these cards regularly to internalize key numbers.</p>
            <div id="numbers-flashcards" class="mt-2"></div>

            <h2 class="mt-4">Self-Check Quiz</h2>
            <div class="quiz-container" id="module-quiz"></div>

            <div class="flex flex-between mt-4">
                <a href="module-09.html" class="btn btn-secondary">&larr; Previous Module</a>
                <button class="btn btn-primary" onclick="completeModule()">Mark Complete &rarr;</button>
            </div>
        </main>
    </div>

    <script src="../assets/js/app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebarToggle');
            const sidebarOverlay = document.getElementById('sidebarOverlay');

            sidebarToggle.addEventListener('click', function() {
                sidebar.classList.toggle('open');
                sidebarOverlay.classList.toggle('open');
            });

            sidebarOverlay.addEventListener('click', function() {
                sidebar.classList.remove('open');
                sidebarOverlay.classList.remove('open');
            });

            document.querySelectorAll('.sidebar-link[data-module]').forEach(link => {
                const moduleNum = parseInt(link.dataset.module);
                if (StaffEngPrep.ProgressTracker.isModuleComplete('systemDesign', moduleNum)) {
                    link.classList.add('completed');
                }
            });

            const quizQuestions = [
                {
                    question: "What is the approximate network latency within a datacenter?",
                    options: ["0.5 ns", "0.5 μs", "0.5 ms", "50 ms"],
                    correct: 2,
                    explanation: "Network round-trip within the same datacenter is approximately 0.5 ms (500 microseconds)."
                },
                {
                    question: "How many seconds are in a day (approximately)?",
                    options: ["10,000", "86,400 (~100K)", "1,000,000", "10,000,000"],
                    correct: 1,
                    explanation: "1 day = 24 * 60 * 60 = 86,400 seconds, which is approximately 100,000 for estimation."
                },
                {
                    question: "If you have 1 million requests per day, what's the average QPS?",
                    options: ["~1 QPS", "~12 QPS", "~100 QPS", "~1000 QPS"],
                    correct: 1,
                    explanation: "1M requests / 86,400 seconds ≈ 12 QPS. Remember: 1M/day ≈ 12/second."
                }
            ];
            const quiz = new StaffEngPrep.Quiz('module-quiz', quizQuestions);
            quiz.render();

            // Flashcards for key numbers
            const flashcards = new StaffEngPrep.Flashcards('numbers-flashcards', [
                {
                    question: "Network latency within same datacenter?",
                    answer: "~0.5 ms (500 microseconds)",
                    explanation: "This is crucial for microservices communication estimates."
                },
                {
                    question: "Network latency across regions (e.g., US East to US West)?",
                    answer: "~150 ms",
                    explanation: "Limited by speed of light. This is why geo-replication matters."
                },
                {
                    question: "How many seconds in a day?",
                    answer: "86,400 seconds (~100K for estimation)",
                    explanation: "24 × 60 × 60 = 86,400. Round to 100K for quick math."
                },
                {
                    question: "1 million requests per day = ? QPS",
                    answer: "~12 QPS",
                    explanation: "1M / 86,400 ≈ 12. Remember: 1M/day ≈ 12/sec"
                },
                {
                    question: "Redis throughput?",
                    answer: "100,000+ ops/sec",
                    explanation: "Redis is extremely fast for in-memory operations."
                },
                {
                    question: "MySQL throughput (simple queries)?",
                    answer: "1,000 - 5,000 QPS",
                    explanation: "Depends on query complexity and hardware. Plan for lower end."
                },
                {
                    question: "SSD vs HDD speed ratio?",
                    answer: "SSD is ~100x faster than HDD",
                    explanation: "SSD random read: 150μs, HDD seek: 10ms"
                },
                {
                    question: "Memory vs SSD speed ratio?",
                    answer: "Memory is ~1000x faster than SSD",
                    explanation: "Main memory: 100ns, SSD: 150μs"
                }
            ]);
            flashcards.render();
        });

        // Capacity Calculator
        function calculateCapacity() {
            const dau = parseInt(document.getElementById('calc-dau').value) || 0;
            const actions = parseInt(document.getElementById('calc-actions').value) || 0;
            const size = parseInt(document.getElementById('calc-size').value) || 0;
            const ratio = parseInt(document.getElementById('calc-ratio').value) || 1;

            const secondsPerDay = 86400;

            // Calculate QPS
            const totalDailyActions = dau * actions;
            const writeQps = Math.round(totalDailyActions / secondsPerDay);
            const peakWriteQps = Math.round(writeQps * 2); // 2x for peak
            const readQps = Math.round(writeQps * ratio);
            const peakReadQps = Math.round(readQps * 2);

            // Calculate Storage
            const dailyStorageBytes = totalDailyActions * size;
            const yearlyStorageBytes = dailyStorageBytes * 365;

            // Calculate Bandwidth (peak)
            const peakBandwidthBps = (peakWriteQps + peakReadQps) * size;

            // Format results
            document.getElementById('result-write-qps').textContent = formatNumber(peakWriteQps);
            document.getElementById('result-read-qps').textContent = formatNumber(peakReadQps);
            document.getElementById('result-daily-storage').textContent = formatBytes(dailyStorageBytes);
            document.getElementById('result-yearly-storage').textContent = formatBytes(yearlyStorageBytes);
            document.getElementById('result-bandwidth').textContent = formatBytes(peakBandwidthBps) + '/s';

            // Breakdown
            document.getElementById('calc-breakdown').innerHTML = `
                <strong>Calculation Breakdown:</strong><br>
                <br>
                <strong>Write Operations:</strong><br>
                - Daily actions = ${formatNumber(dau)} users × ${actions} actions = ${formatNumber(totalDailyActions)}/day<br>
                - Average write QPS = ${formatNumber(totalDailyActions)} / 86,400 = ${formatNumber(writeQps)} QPS<br>
                - Peak write QPS (2x) = ${formatNumber(peakWriteQps)} QPS<br>
                <br>
                <strong>Read Operations:</strong><br>
                - Read QPS = Write QPS × ${ratio} = ${formatNumber(readQps)} QPS<br>
                - Peak read QPS (2x) = ${formatNumber(peakReadQps)} QPS<br>
                <br>
                <strong>Storage:</strong><br>
                - Daily = ${formatNumber(totalDailyActions)} × ${formatBytes(size)} = ${formatBytes(dailyStorageBytes)}<br>
                - Yearly = ${formatBytes(dailyStorageBytes)} × 365 = ${formatBytes(yearlyStorageBytes)}<br>
                <br>
                <strong>Servers Needed (rough estimate):</strong><br>
                - Web servers (at 5K RPS each): ~${Math.ceil((peakWriteQps + peakReadQps) / 5000)} servers<br>
                - DB replicas (at 3K QPS each): ~${Math.ceil(peakReadQps / 3000)} read replicas
            `;

            document.getElementById('calc-results').style.display = 'block';
        }

        function formatNumber(num) {
            if (num >= 1e9) return (num / 1e9).toFixed(1) + 'B';
            if (num >= 1e6) return (num / 1e6).toFixed(1) + 'M';
            if (num >= 1e3) return (num / 1e3).toFixed(1) + 'K';
            return num.toString();
        }

        function formatBytes(bytes) {
            if (bytes >= 1e15) return (bytes / 1e15).toFixed(1) + ' PB';
            if (bytes >= 1e12) return (bytes / 1e12).toFixed(1) + ' TB';
            if (bytes >= 1e9) return (bytes / 1e9).toFixed(1) + ' GB';
            if (bytes >= 1e6) return (bytes / 1e6).toFixed(1) + ' MB';
            if (bytes >= 1e3) return (bytes / 1e3).toFixed(1) + ' KB';
            return bytes + ' B';
        }

        function completeModule() {
            StaffEngPrep.ProgressTracker.markModuleComplete('systemDesign', 10);
            alert('Module 10 marked as complete!');
            window.location.href = 'module-11.html';
        }
    </script>
</body>
</html>
